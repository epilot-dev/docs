"use strict";(self.webpackChunkepilot_dev_handbook=self.webpackChunkepilot_dev_handbook||[]).push([[23669],{35722:(e,t,o)=>{o.d(t,{G:()=>c});var n=o(42858),a=o(67294),i=o(25108);let s=0,r=!1;const l=(e,t)=>{const o=e?.getAttribute("data-theme")??"light",n="dark"===o?"dark":"default";return t?.theme?.[o]??t?.mermaid?.theme??n},c=e=>{let{chart:t,config:o}=e;const c=(0,a.useRef)(null),u=(0,a.useRef)("mermaid-"+s++),[p,d]=(0,a.useState)(""),m=(0,a.useMemo)((()=>"string"==typeof o?JSON.parse(o):o),[o]);return(0,a.useEffect)((()=>{if("undefined"==typeof window)return;const e=document.querySelector("html"),o=l(e,m);r||(n.Z.initialize({startOnLoad:!1,theme:o,...m?.mermaid||{}}),r=!0);(async()=>{try{const{svg:e}=await n.Z.render(u.current,t);d(e)}catch(e){i.error("Mermaid rendering failed:",e)}})()}),[t,m]),(0,a.useEffect)((()=>{if("undefined"==typeof window)return;const e=document.querySelector("html"),o=new MutationObserver((o=>{for(const a of o){if("attributes"!==a.type||"data-theme"!==a.attributeName)continue;const o=l(e,m);r=!1,n.Z.initialize({startOnLoad:!1,theme:o,...m?.mermaid||{}}),r=!0,u.current="mermaid-"+s++,n.Z.render(u.current,t).then((e=>{let{svg:t}=e;d(t)}));break}}));return o.observe(e,{attributes:!0}),()=>o.disconnect()}),[t,m]),"undefined"==typeof window?a.createElement("div",{className:"mermaid"},t):a.createElement("div",{ref:c,dangerouslySetInnerHTML:{__html:p}})}},37341:(e,t,o)=>{o.r(t),o.d(t,{contentTitle:()=>s,default:()=>p,frontMatter:()=>i,metadata:()=>r,toc:()=>l});var n=o(87462),a=(o(67294),o(3905));o(35722);const i={title:"Custom Workflow Task",hide_title:!0,sidebar_position:5},s="Custom Workflow Action",r={unversionedId:"apps/about-apps/components/custom-action",id:"apps/about-apps/components/custom-action",title:"Custom Workflow Task",description:"Extend epilot's automation capabilities with custom actions that integrate seamlessly into the platform's workflow engine.",source:"@site/docs/apps/about-apps/components/custom-action.md",sourceDirName:"apps/about-apps/components",slug:"/apps/about-apps/components/custom-action",permalink:"/docs/apps/about-apps/components/custom-action",editUrl:"https://github.com/epilot-dev/docs/edit/main/docs/apps/about-apps/components/custom-action.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{title:"Custom Workflow Task",hide_title:!0,sidebar_position:5},sidebar:"docsSidebar",previous:{title:"Journey Blocks",permalink:"/docs/apps/about-apps/components/custom-journey-block"},next:{title:"Portal Extensions",permalink:"/docs/apps/about-apps/components/portal-extension"}},l=[{value:"What Are Custom Actions?",id:"what-are-custom-actions",children:[],level:2},{value:"Why Use Custom Actions?",id:"why-use-custom-actions",children:[],level:2},{value:"How to Create a Custom Action",id:"how-to-create-a-custom-action",children:[],level:2},{value:"External Integration",id:"external-integration",children:[{value:"How To Integrate External Systems",id:"how-to-integrate-external-systems",children:[],level:3},{value:"Example: Sync Data With Your Platform and Write Back to epilot Entities",id:"example-sync-data-with-your-platform-and-write-back-to-epilot-entities",children:[],level:3},{value:"How External Integrations Are Secured (Asymmetric Signature)",id:"how-external-integrations-are-secured-asymmetric-signature",children:[],level:3}],level:2}],c={toc:l},u="wrapper";function p(e){let{components:t,...o}=e;return(0,a.kt)(u,(0,n.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"custom-workflow-action"},"Custom Workflow Action"),(0,a.kt)("p",null,"Extend epilot's automation capabilities with custom actions that integrate seamlessly into the platform's workflow engine."),(0,a.kt)("h2",{id:"what-are-custom-actions"},"What Are Custom Actions?"),(0,a.kt)("p",null,"epilot provides a powerful automation engine for creating complex workflows and processes. Custom Actions are specialized components that you add to these workflows, enabling integrations and processing steps that are not available out-of-the-box. Customers install these actions to extend their automation capabilities with tailored solutions that fit their business needs."),(0,a.kt)("h2",{id:"why-use-custom-actions"},"Why Use Custom Actions?"),(0,a.kt)("p",null,"Custom Actions provide several key benefits:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Tailored Functionality"),": Create specific actions that address unique business requirements"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Seamless Integration"),": Actions fit naturally into epilot's automation workflows, enhancing existing processes"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Reusability"),": Once created, actions can be reused across multiple workflows, reducing the time to set up new automations"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Community Sharing"),": Share your custom actions with the epilot community, allowing others to benefit from your innovations")),(0,a.kt)("h2",{id:"how-to-create-a-custom-action"},"How to Create a Custom Action"),(0,a.kt)("h2",{id:"external-integration"},"External Integration"),(0,a.kt)("h3",{id:"how-to-integrate-external-systems"},"How To Integrate External Systems"),(0,a.kt)("p",null,"A custom action with an external integration is basically a webhook (POST) request to your defined system.\nYou can either:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Trigger some asynchronous processing in your system, or"),(0,a.kt)("li",{parentName:"ol"},"Update epilot data with an access token built from the permission/role you can define (see ",(0,a.kt)("a",{parentName:"li",href:"/docs/apps/about-apps/configure-permissions"},"Permissions"),").")),(0,a.kt)("p",null,"The payload of the request is the following:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "external_integration",\n  "timestamp": "2022-11-03T20:26:10.344522Z",\n  "data": {\n    "org_id": "", // The ID of the organization that the action is executed in\n    "entity": "", // The entity type that the action is executed on, e.g. "opportunity", "contact","contract", etc.\n    "action_config": {},\n    "app_config": {}, \n    "app_options": {}, // The options configured by the user when installing the app\n    "execution_id": "",\n    "execution_status": "",\n    "exection_action_id": "",\n    "trigger_event": "", // information about the calling event, e.g. "opportunity.created", "opportunity.updated", etc.\n  }\n}\n')),(0,a.kt)("p",null,"Additionally, you will receive 4 headers specified by epilot:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-http"},"webhook-signature   v1a,puLZGVBm1MhSFz/kpgDsbt56DqanAAEg5Y5pgkVaz2d9WTbp6sGpo64qJFm8DWE8fo85b3cOs0CvV9v4WseUBw==\nwebhook-timestamp   1749649159\nwebhook-id  msg_245c477923600038edb96d07f9d95f77\n\noptional: x-epilot-token: ey...\n")),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"webhook-*")," headers are used to verify and check the authenticity of the request. See more about ",(0,a.kt)("a",{parentName:"p",href:"#how-external-integrations-are-secured-asymmetric-signature"},"how to secure external integrations")," below."),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"x-epilot-token")," is an access token that is generated based on the permissions and roles defined in your app configuration. This token allows you to securely access epilot data and perform actions on behalf of the user. (expires after 10 min)"),(0,a.kt)("h3",{id:"example-sync-data-with-your-platform-and-write-back-to-epilot-entities"},"Example: Sync Data With Your Platform and Write Back to epilot Entities"),(0,a.kt)("p",null,"To create a custom action that syncs data with your platform and writes back to epilot entities, you can follow these steps:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"Define the Action"),": Create a new custom action in your app configuration with the type ",(0,a.kt)("inlineCode",{parentName:"li"},"external_integration"),"."),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"Define the Permissions"),": Specify the permissions required for the action to access the necessary data in epilot.")),(0,a.kt)("p",null,"Now whenever a customer installs your App and invokes the custom action, the request will be sent to your external system with the payload described above. Your system can then process the request, perform the necessary operations (e.g., syncing data), and respond accordingly. By specifying the previous permission an access token is attached to the request. You can use that token and our ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/epilot-dev/sdk-js"},"official SDK")," to write back to epilot entities."),(0,a.kt)("h3",{id:"how-external-integrations-are-secured-asymmetric-signature"},"How External Integrations Are Secured (Asymmetric Signature)"),(0,a.kt)("p",null,"To ensure that external integrations are secure, epilot uses an asymmetric signature mechanism. This involves generating a unique signature for each request that is sent to the external system. The signature is created using a private key that is known only to the epilot platform, and it is verified by the external system using a corresponding ",(0,a.kt)("a",{parentName:"p",href:"https://app.sls.epilot.io/v1/public/.well-known/public-key"},"public key"),". This ensures that only authorized requests are processed, and it prevents unauthorized access to the external system. "),(0,a.kt)("p",null,"To secure the endpoint our custom action is calling, you need to verify the signature of the request. We recommend to use the ",(0,a.kt)("inlineCode",{parentName:"p"},"verifyEpilotSignature")," function by our App SDK as it handles the verification process for you. This function checks the signature against the public key and ensures that the request is valid. We use a standard way to sign & verify the requests according to the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/standard-webhooks/standard-webhooks/blob/main/spec/standard-webhooks.md"},"webhook spec"),"."))}p.isMDXComponent=!0}}]);