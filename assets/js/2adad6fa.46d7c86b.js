"use strict";(self.webpackChunkepilot_dev_handbook=self.webpackChunkepilot_dev_handbook||[]).push([[20499],{35722:(e,t,i)=>{i.d(t,{G:()=>p});var a=i(42858),n=i(67294),r=i(25108);let l=0,o=!1;const s=(e,t)=>{const i=e?.getAttribute("data-theme")??"light",a="dark"===i?"dark":"default";return t?.theme?.[i]??t?.mermaid?.theme??a},p=e=>{let{chart:t,config:i}=e;const p=(0,n.useRef)(null),c=(0,n.useRef)("mermaid-"+l++),[d,u]=(0,n.useState)(""),m=(0,n.useMemo)((()=>"string"==typeof i?JSON.parse(i):i),[i]);return(0,n.useEffect)((()=>{if("undefined"==typeof window)return;const e=document.querySelector("html"),i=s(e,m);o||(a.Z.initialize({startOnLoad:!1,theme:i,...m?.mermaid||{}}),o=!0);(async()=>{try{const{svg:e}=await a.Z.render(c.current,t);u(e)}catch(e){r.error("Mermaid rendering failed:",e)}})()}),[t,m]),(0,n.useEffect)((()=>{if("undefined"==typeof window)return;const e=document.querySelector("html"),i=new MutationObserver((i=>{for(const n of i){if("attributes"!==n.type||"data-theme"!==n.attributeName)continue;const i=s(e,m);o=!1,a.Z.initialize({startOnLoad:!1,theme:i,...m?.mermaid||{}}),o=!0,c.current="mermaid-"+l++,a.Z.render(c.current,t).then((e=>{let{svg:t}=e;u(t)}));break}}));return i.observe(e,{attributes:!0}),()=>i.disconnect()}),[t,m]),"undefined"==typeof window?n.createElement("div",{className:"mermaid"},t):n.createElement("div",{ref:p,dangerouslySetInnerHTML:{__html:d}})}},45380:(e,t,i)=>{i.r(t),i.d(t,{contentTitle:()=>l,default:()=>d,frontMatter:()=>r,metadata:()=>o,toc:()=>s});var a=i(87462),n=(i(67294),i(3905));i(35722);const r={sidebar_position:1,title:"Entities"},l="Pricing Entities",o={unversionedId:"pricing/entities",id:"pricing/entities",title:"Entities",description:"Three core entity types power epilot pricing. All are built on the flexible entity system -- extend them with custom attributes, attach workflows, and use webhooks to integrate pricing logic from external backends.",source:"@site/docs/pricing/1-entities.mdx",sourceDirName:"pricing",slug:"/pricing/entities",permalink:"/docs/pricing/entities",editUrl:"https://github.com/epilot-dev/docs/edit/main/docs/pricing/1-entities.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Entities"},sidebar:"docsSidebar",previous:{title:"PricingEntitiesExtractResult",permalink:"/docs/pricing/pricing-library/interfaces/PricingEntitiesExtractResult"},next:{title:"Catalog",permalink:"/docs/pricing/catalog"}},s=[{value:"Product",id:"product",children:[],level:2},{value:"Price",id:"price",children:[{value:"Simple Price",id:"simple-price",children:[],level:3},{value:"Composite Price",id:"composite-price",children:[],level:3}],level:2},{value:"Tax",id:"tax",children:[],level:2},{value:"Coupons &amp; Discounts",id:"coupons",children:[],level:2}],p={toc:s},c="wrapper";function d(e){let{components:t,...i}=e;return(0,n.kt)(c,(0,a.Z)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"pricing-entities"},"Pricing Entities"),(0,n.kt)("p",null,"Three core entity types power epilot pricing. All are built on the ",(0,n.kt)("a",{parentName:"p",href:"/docs/entities/flexible-entities"},"flexible entity")," system -- extend them with custom attributes, attach workflows, and use ",(0,n.kt)("a",{parentName:"p",href:"/docs/integrations/webhooks"},"webhooks")," to integrate pricing logic from external backends."),(0,n.kt)("h2",{id:"product"},(0,n.kt)("a",{parentName:"h2",href:"/api/pricing#tag/product_schema"},"Product")),(0,n.kt)("p",null,"Products represent anything you sell: physical goods, digital goods, services, or subscriptions."),(0,n.kt)("p",null,"A product can have multiple ",(0,n.kt)("strong",{parentName:"p"},"price options")," for different billing cycles, customer segments, or regional variations. Each option references either a simple or composite price."),(0,n.kt)("p",null,"Products support:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Categories")," -- Classify products (e.g., power, gas, solar, services) for catalog filtering and availability rules"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Custom attributes")," -- Extend the built-in schema with any fields your business needs"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Relations")," -- Link products to contracts, orders, opportunities, or any other entity"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Availability rules")," -- Restrict products by location or other criteria")),(0,n.kt)("h2",{id:"price"},(0,n.kt)("a",{parentName:"h2",href:"/api/pricing#tag/simple_price_schema"},"Price")),(0,n.kt)("p",null,"A price defines how much a product costs. Two types are supported:"),(0,n.kt)("h3",{id:"simple-price"},"Simple Price"),(0,n.kt)("p",null,"A standalone price with a fixed unit amount. Supports:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"One-time or recurring")," billing (weekly, monthly, quarterly, semi-annual, annual)"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Variable pricing")," -- when ",(0,n.kt)("inlineCode",{parentName:"li"},"variable_price")," is enabled, the total is calculated from user input (e.g., energy consumption in kWh)"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Tiered pricing")," -- volume, graduated (cumulative), or flat-fee tiers based on quantity ranges"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Built-in units")," -- energy-industry units like kWh, kW, m, m","\xb2",", plus custom units")),(0,n.kt)("p",null,"See ",(0,n.kt)("a",{parentName:"p",href:"/docs/pricing/pricing-models"},"Pricing Models")," for the full reference on pricing model types."),(0,n.kt)("h3",{id:"composite-price"},(0,n.kt)("a",{parentName:"h3",href:"/api/pricing#tag/dynamic_price_schema"},"Composite Price")),(0,n.kt)("p",null,"A composite price is calculated from a set of ",(0,n.kt)("strong",{parentName:"p"},"component prices"),", which can span multiple products. This enables bundled pricing for complex product offerings."),(0,n.kt)("p",null,"Example: a solar installation offer that combines a one-time hardware price, a recurring maintenance service fee, and a variable energy feed-in tariff -- all as a single composite line item."),(0,n.kt)("p",null,"Each component can have its own quantity, pricing model, and billing period. The composite price aggregates all components into a unified total."),(0,n.kt)("h2",{id:"tax"},(0,n.kt)("a",{parentName:"h2",href:"/api/pricing#tag/tax_schema"},"Tax")),(0,n.kt)("p",null,"A tax is a percentage rate applied to prices. Two modes are supported:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Mode"),(0,n.kt)("th",{parentName:"tr",align:null},"Behavior"),(0,n.kt)("th",{parentName:"tr",align:null},"Example"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"Inclusive")),(0,n.kt)("td",{parentName:"tr",align:null},"Tax is included in the displayed price"),(0,n.kt)("td",{parentName:"tr",align:null},"A 100 EUR price with 19% inclusive tax displays as 100 EUR (net: 84.03 EUR)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"Exclusive")),(0,n.kt)("td",{parentName:"tr",align:null},"Tax is added on top of the displayed price"),(0,n.kt)("td",{parentName:"tr",align:null},"A 100 EUR price with 19% exclusive tax displays as 119 EUR")))),(0,n.kt)("p",null,"Tax entities support:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Standard rates")," -- Common rates like 19% (standard) and 7% (reduced) for the German market"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Tax regions")," -- Bind taxes to a jurisdiction for region-specific tax handling"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Custom tax types")," -- Define additional tax categories beyond the built-in standard, reduced, and non-taxable types")),(0,n.kt)("h2",{id:"coupons"},"Coupons & Discounts"),(0,n.kt)("p",null,"Coupons apply discounts to prices at the line-item level. Two discount categories and two calculation types are supported:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null}),(0,n.kt)("th",{parentName:"tr",align:null},"Fixed Amount"),(0,n.kt)("th",{parentName:"tr",align:null},"Percentage"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"Discount")),(0,n.kt)("td",{parentName:"tr",align:null},"Flat amount deducted from the price"),(0,n.kt)("td",{parentName:"tr",align:null},"Percentage deducted from the price")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"Cashback")),(0,n.kt)("td",{parentName:"tr",align:null},"Fixed cashback amount credited to the customer"),(0,n.kt)("td",{parentName:"tr",align:null},"Percentage-based cashback")))),(0,n.kt)("p",null,"Coupons optionally support:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Promo codes")," -- Require the customer to enter a code to apply the discount"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Usage limits")," -- Cap the number of times a promo code can be redeemed"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Selective application")," -- Apply coupons to specific prices within an order")))}d.isMDXComponent=!0}}]);