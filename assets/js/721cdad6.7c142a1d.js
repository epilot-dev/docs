"use strict";(self.webpackChunkepilot_dev_handbook=self.webpackChunkepilot_dev_handbook||[]).push([[23413],{35722:(e,t,a)=>{a.d(t,{G:()=>d});var i=a(42858),n=a(67294),o=a(25108);let r=0,s=!1;const l=(e,t)=>{const a=e?.getAttribute("data-theme")??"light",i="dark"===a?"dark":"default";return t?.theme?.[a]??t?.mermaid?.theme??i},d=e=>{let{chart:t,config:a}=e;const d=(0,n.useRef)(null),u=(0,n.useRef)("mermaid-"+r++),[c,p]=(0,n.useState)(""),m=(0,n.useMemo)((()=>"string"==typeof a?JSON.parse(a):a),[a]);return(0,n.useEffect)((()=>{if("undefined"==typeof window)return;const e=document.querySelector("html"),a=l(e,m);s||(i.Z.initialize({startOnLoad:!1,theme:a,...m?.mermaid||{}}),s=!0);(async()=>{try{const{svg:e}=await i.Z.render(u.current,t);p(e)}catch(e){o.error("Mermaid rendering failed:",e)}})()}),[t,m]),(0,n.useEffect)((()=>{if("undefined"==typeof window)return;const e=document.querySelector("html"),a=new MutationObserver((a=>{for(const n of a){if("attributes"!==n.type||"data-theme"!==n.attributeName)continue;const a=l(e,m);s=!1,i.Z.initialize({startOnLoad:!1,theme:a,...m?.mermaid||{}}),s=!0,u.current="mermaid-"+r++,i.Z.render(u.current,t).then((e=>{let{svg:t}=e;p(t)}));break}}));return a.observe(e,{attributes:!0}),()=>a.disconnect()}),[t,m]),"undefined"==typeof window?n.createElement("div",{className:"mermaid"},t):n.createElement("div",{ref:d,dangerouslySetInnerHTML:{__html:c}})}},4493:(e,t,a)=>{a.r(t),a.d(t,{contentTitle:()=>r,default:()=>c,frontMatter:()=>o,metadata:()=>s,toc:()=>l});var i=a(87462),n=(a(67294),a(3905));a(35722);const o={sidebar_position:7,title:"Multi-Factor Authentication"},r="Multi-Factor Authentication (MFA)",s={unversionedId:"auth/mfa",id:"auth/mfa",title:"Multi-Factor Authentication",description:"MFA adds a second verification step after password login, significantly reducing the risk of account compromise from stolen credentials.",source:"@site/docs/auth/mfa.md",sourceDirName:"auth",slug:"/auth/mfa",permalink:"/docs/auth/mfa",editUrl:"https://github.com/epilot-dev/docs/edit/main/docs/auth/mfa.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7,title:"Multi-Factor Authentication"},sidebar:"docsSidebar",previous:{title:"Token Types",permalink:"/docs/auth/token-types"},next:{title:"Passwordless Login",permalink:"/docs/auth/passwordless"}},l=[{value:"How It Works",id:"how-it-works",children:[],level:2},{value:"Enabling MFA for Your Organisation",id:"enabling-mfa-for-your-organisation",children:[],level:2},{value:"User Setup",id:"user-setup",children:[],level:2},{value:"MFA on Customer Portals",id:"mfa-on-customer-portals",children:[],level:2},{value:"Configuration via API",id:"configuration-via-api",children:[],level:2},{value:"See Also",id:"see-also",children:[],level:2}],d={toc:l},u="wrapper";function c(e){let{components:t,...a}=e;return(0,n.kt)(u,(0,i.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"multi-factor-authentication-mfa"},"Multi-Factor Authentication (MFA)"),(0,n.kt)("p",null,"MFA adds a second verification step after password login, significantly reducing the risk of account compromise from stolen credentials."),(0,n.kt)("p",null,"epilot supports TOTP (time-based one-time password) via authenticator apps such as Google Authenticator, Authy, or 1Password, as well as SMS-based MFA."),(0,n.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,n.kt)("div",{parentName:"div",className:"admonition-heading"},(0,n.kt)("h5",{parentName:"div"},(0,n.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,n.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,n.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,n.kt)("div",{parentName:"div",className:"admonition-content"},(0,n.kt)("p",{parentName:"div"},"For the strongest protection against phishing, consider ",(0,n.kt)("a",{parentName:"p",href:"/docs/auth/passkeys"},"Passkeys")," or ",(0,n.kt)("a",{parentName:"p",href:"/docs/sso/single-sign-on"},"SSO")," instead of or in addition to MFA. Passkeys and SSO eliminate shared secrets entirely, providing phishing-resistant authentication."))),(0,n.kt)("h2",{id:"how-it-works"},"How It Works"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"A user logs in with their email and password via ",(0,n.kt)("a",{parentName:"li",href:"/docs/auth/authentication"},"AWS Cognito"),"."),(0,n.kt)("li",{parentName:"ol"},"Cognito challenges the user for a TOTP or SMS code."),(0,n.kt)("li",{parentName:"ol"},"The user enters the code from their authenticator app or SMS."),(0,n.kt)("li",{parentName:"ol"},"On successful verification, Cognito issues OAuth 2.0 tokens.")),(0,n.kt)("h2",{id:"enabling-mfa-for-your-organisation"},"Enabling MFA for Your Organisation"),(0,n.kt)("p",null,"Organisation administrators can enable MFA from ",(0,n.kt)("strong",{parentName:"p"},"Organisation Settings > Security")," in the epilot 360 portal."),(0,n.kt)("p",null,"Two modes are available:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Optional")," -- individual users choose whether to enable MFA on their account."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Required")," -- all users in the organisation must set up MFA on their next login.")),(0,n.kt)("h2",{id:"user-setup"},"User Setup"),(0,n.kt)("p",null,"When MFA is enabled, users are prompted to configure it on their next login:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Open an authenticator app on your mobile device."),(0,n.kt)("li",{parentName:"ol"},"Scan the QR code displayed on the epilot login screen."),(0,n.kt)("li",{parentName:"ol"},"Enter the 6-digit code from the app to confirm setup."),(0,n.kt)("li",{parentName:"ol"},"On all future logins, you will be prompted for a TOTP code after entering your password.")),(0,n.kt)("p",null,"The MFA status of each user is tracked via the ",(0,n.kt)("inlineCode",{parentName:"p"},"mfa_enabled")," field on the ",(0,n.kt)("a",{parentName:"p",href:"/api/user"},"User API"),"."),(0,n.kt)("h2",{id:"mfa-on-customer-portals"},"MFA on Customer Portals"),(0,n.kt)("p",null,"Customer portals support an advanced MFA mode that sends a login code and magic link to the user's email after password entry. Portal administrators can enable this in portal settings under ",(0,n.kt)("strong",{parentName:"p"},"Security > Multi-factor Authentication"),"."),(0,n.kt)("h2",{id:"configuration-via-api"},"Configuration via API"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"User MFA status"),": ",(0,n.kt)("inlineCode",{parentName:"li"},"mfa_enabled")," field on the ",(0,n.kt)("a",{parentName:"li",href:"/api/user"},"User API")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Organisation settings"),": ",(0,n.kt)("a",{parentName:"li",href:"/api/organization"},"Organization API"))),(0,n.kt)("h2",{id:"see-also"},"See Also"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/docs/auth/passwordless"},"Passwordless Login")," -- sign-in links without passwords"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/docs/auth/passkeys"},"Passkeys")," -- phishing-resistant biometric and hardware key authentication"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/docs/sso/single-sign-on"},"SSO")," -- federated login with OIDC and SAML"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/docs/auth/authentication"},"Authentication")," -- OAuth 2.0 login flow")))}c.isMDXComponent=!0}}]);