"use strict";(self.webpackChunkepilot_dev_handbook=self.webpackChunkepilot_dev_handbook||[]).push([[55038],{35722:(e,t,n)=>{n.d(t,{G:()=>m});var r=n(42858),a=n(67294),i=n(25108);let o=0,s=!1;const l=(e,t)=>{const n=e?.getAttribute("data-theme")??"light",r="dark"===n?"dark":"default";return t?.theme?.[n]??t?.mermaid?.theme??r},m=e=>{let{chart:t,config:n}=e;const m=(0,a.useRef)(null),c=(0,a.useRef)("mermaid-"+o++),[d,u]=(0,a.useState)(""),p=(0,a.useMemo)((()=>"string"==typeof n?JSON.parse(n):n),[n]);return(0,a.useEffect)((()=>{if("undefined"==typeof window)return;const e=document.querySelector("html"),n=l(e,p);s||(r.Z.initialize({startOnLoad:!1,theme:n,...p?.mermaid||{}}),s=!0);(async()=>{try{const{svg:e}=await r.Z.render(c.current,t);u(e)}catch(e){i.error("Mermaid rendering failed:",e)}})()}),[t,p]),(0,a.useEffect)((()=>{if("undefined"==typeof window)return;const e=document.querySelector("html"),n=new MutationObserver((n=>{for(const a of n){if("attributes"!==a.type||"data-theme"!==a.attributeName)continue;const n=l(e,p);s=!1,r.Z.initialize({startOnLoad:!1,theme:n,...p?.mermaid||{}}),s=!0,c.current="mermaid-"+o++,r.Z.render(c.current,t).then((e=>{let{svg:t}=e;u(t)}));break}}));return n.observe(e,{attributes:!0}),()=>n.disconnect()}),[t,p]),"undefined"==typeof window?a.createElement("div",{className:"mermaid"},t):a.createElement("div",{ref:m,dangerouslySetInnerHTML:{__html:d}})}},97074:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>l});var r=n(87462),a=(n(67294),n(3905));n(35722);const i={sidebar_position:3},o="Metering",s={unversionedId:"portals/metering",id:"portals/metering",title:"Metering",description:"[API Docs]",source:"@site/docs/portals/metering.md",sourceDirName:"portals",slug:"/portals/metering",permalink:"/docs/portals/metering",editUrl:"https://github.com/epilot-dev/docs/edit/main/docs/portals/metering.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"docsSidebar",previous:{title:"Architecture",permalink:"/docs/portals/architecture"},next:{title:"Mobile App",permalink:"/docs/portals/mobile-app"}},l=[{value:"Administrator Actions",id:"administrator-actions",children:[],level:2},{value:"Customer Actions",id:"customer-actions",children:[],level:2},{value:"Entities",id:"entities",children:[{value:"Meter",id:"meter",children:[],level:3},{value:"Counter",id:"counter",children:[],level:3}],level:2}],m={toc:l},c="wrapper";function d(e){let{components:t,...n}=e;return(0,a.kt)(c,(0,r.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"metering"},"Metering"),(0,a.kt)("p",null,"[",(0,a.kt)("a",{parentName:"p",href:"/api/metering"},"API Docs"),"]\n[",(0,a.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@epilot/metering-client"},"SDK"),"]"),(0,a.kt)("p",null,"The Metering API manages meters and their readings. It provides endpoints for retrieving meter information, updating meter details, creating readings, and querying reading history. Both administrators and portal end-users have access, with different permission scopes."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#administrator-actions"},"Administrator Actions")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#customer-actions"},"Customer Actions"))),(0,a.kt)("h2",{id:"administrator-actions"},"Administrator Actions"),(0,a.kt)("p",null,"[",(0,a.kt)("a",{parentName:"p",href:"/api/metering/#tag/ECP-Admin"},"API Docs"),"]"),(0,a.kt)("p",null,"Administrators have full access to meter management:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Retrieve and monitor customer meters"),(0,a.kt)("li",{parentName:"ul"},"Update meter details (type, location, manufacturer)"),(0,a.kt)("li",{parentName:"ul"},"View specific meter or counter information"),(0,a.kt)("li",{parentName:"ul"},"Create individual or bulk meter readings with metadata (recorder, reason)"),(0,a.kt)("li",{parentName:"ul"},"Create readings from journey submissions"),(0,a.kt)("li",{parentName:"ul"},"Query readings within a specified interval")),(0,a.kt)("h2",{id:"customer-actions"},"Customer Actions"),(0,a.kt)("p",null,"[",(0,a.kt)("a",{parentName:"p",href:"/api/metering/#tag/ECP"},"API Docs"),"]"),(0,a.kt)("p",null,"Portal end-users (Customer Portal) access a scoped subset of metering functionality:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"View their associated meters with details (type, location, linked contracts)"),(0,a.kt)("li",{parentName:"ul"},"Update specific meter details where permitted"),(0,a.kt)("li",{parentName:"ul"},"Submit meter readings through the portal interface")),(0,a.kt)("h2",{id:"entities"},"Entities"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#meter"},"Meter")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#counter"},"Counter"))),(0,a.kt)("h3",{id:"meter"},"Meter"),(0,a.kt)("p",null,"A meter represents a device that measures consumption or production of a resource (electricity, water, gas). It carries attributes like meter type, manufacturer, meter number, and location."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Meter entity example"',title:'"Meter',entity:!0,'example"':!0},'{\n    "_id": "string",\n    "_title": "Example Entity",\n    "_org": "123",\n    "_tags": [\n    "example",\n    "mock"\n    ],\n    "_created_at": "2021-02-09T12:41:43.662Z",\n    "_updated_at": "2021-02-09T12:41:43.662Z",\n    "_schema": "meter",\n    "ma_lo_id": "A09-123",\n    "meter_type": "three-phase-meter",\n    "tariff_type": "Peak load tariff",\n    "meter_number": "J-1093-1AK",\n    "sector": "power",\n    "location": [\n    {\n        "country": "Germany",\n        "city": "Koln",\n        "postal_code": 81475,\n        "street": "Melateng\xfcrtel",\n        "street_number": 71,\n        "additional_info": "5. Etage",\n        "_tags": [\n        "billing",\n        "delivery"\n        ]\n    }\n    ],\n    "used_for": "Domestic Usage",\n    "manufacturer": "Energy One",\n    "calibration_date": "2022-10-10T00:00:00.000Z",\n    "contract": {\n    "$relation": [\n        {\n        "entity_id": "9a2081a2-1615-44b8-b988-d757983290dd",\n        "_slug": "contact"\n        }\n    ]\n    },\n    "customer": {\n    "$relation": [\n        {\n        "entity_id": "9a2081a2-1615-44b8-b988-d757983290dd",\n        "_slug": "contact"\n        }\n    ]\n    }\n}\n')),(0,a.kt)("h3",{id:"counter"},"Counter"),(0,a.kt)("p",null,"A counter is a component within a meter that tracks a specific measurement. For example, an electricity meter may have counters for peak/off-peak consumption, or for feed-in vs. feed-out energy. Counter attributes include direction, transformer ratio, unit, and current consumption."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Counter entity example"',title:'"Counter',entity:!0,'example"':!0},'{\n    "_id": "991a1821-43bc-46b8-967d-64a3d87c31f8",\n    "_title": "Example Entity",\n    "_org": "123",\n    "_tags": [\n    "example",\n    "mock"\n    ],\n    "_created_at": "2021-02-09T12:41:43.662Z",\n    "_updated_at": "2021-02-09T12:41:43.662Z",\n    "_schema": "meter_counter",\n    "obis_number": "A-34",\n    "direction": "feed-in",\n    "transformer_ratio": 70,\n    "unit": "w",\n    "forecast_reading_value": "270",\n    "forecast_as_of": "2022-12-10T00:00:00.000Z",\n    "current_consumption": 240,\n    "last_reading": "2022-10-10T00:00:00.000Z",\n    "conversion_factor": 3,\n    "tariff_type": "ht"\n}\n')))}d.isMDXComponent=!0}}]);