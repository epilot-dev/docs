"use strict";(self.webpackChunkepilot_dev_handbook=self.webpackChunkepilot_dev_handbook||[]).push([[34683],{35722:(e,t,a)=>{a.d(t,{G:()=>c});var n=a(42858),i=a(67294),o=a(25108);let r=0,s=!1;const l=(e,t)=>{const a=e?.getAttribute("data-theme")??"light",n="dark"===a?"dark":"default";return t?.theme?.[a]??t?.mermaid?.theme??n},c=e=>{let{chart:t,config:a}=e;const c=(0,i.useRef)(null),u=(0,i.useRef)("mermaid-"+r++),[d,p]=(0,i.useState)(""),h=(0,i.useMemo)((()=>"string"==typeof a?JSON.parse(a):a),[a]);return(0,i.useEffect)((()=>{if("undefined"==typeof window)return;const e=document.querySelector("html"),a=l(e,h);s||(n.Z.initialize({startOnLoad:!1,theme:a,...h?.mermaid||{}}),s=!0);(async()=>{try{const{svg:e}=await n.Z.render(u.current,t);p(e)}catch(e){o.error("Mermaid rendering failed:",e)}})()}),[t,h]),(0,i.useEffect)((()=>{if("undefined"==typeof window)return;const e=document.querySelector("html"),a=new MutationObserver((a=>{for(const i of a){if("attributes"!==i.type||"data-theme"!==i.attributeName)continue;const a=l(e,h);s=!1,n.Z.initialize({startOnLoad:!1,theme:a,...h?.mermaid||{}}),s=!0,u.current="mermaid-"+r++,n.Z.render(u.current,t).then((e=>{let{svg:t}=e;p(t)}));break}}));return a.observe(e,{attributes:!0}),()=>a.disconnect()}),[t,h]),"undefined"==typeof window?i.createElement("div",{className:"mermaid"},t):i.createElement("div",{ref:c,dangerouslySetInnerHTML:{__html:d}})}},94158:(e,t,a)=>{a.r(t),a.d(t,{contentTitle:()=>s,default:()=>p,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var n=a(87462),i=(a(67294),a(3905)),o=a(35722);const r={sidebar_position:1},s="Authentication",l={unversionedId:"auth/authentication",id:"auth/authentication",title:"Authentication",description:"epilot APIs use bearer tokens for authentication. All requests must include a valid token in the Authorization header:",source:"@site/docs/auth/authentication.md",sourceDirName:"auth",slug:"/auth/authentication",permalink:"/docs/auth/authentication",editUrl:"https://github.com/epilot-dev/docs/edit/main/docs/auth/authentication.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"docsSidebar",previous:{title:"Audit Logs",permalink:"/docs/audit-logs"},next:{title:"Access Tokens",permalink:"/docs/auth/access-tokens"}},c=[{value:"Getting Started",id:"getting-started",children:[],level:2},{value:"How It Works",id:"how-it-works",children:[],level:2},{value:"Token Types",id:"token-types",children:[],level:2},{value:"See Also",id:"see-also",children:[],level:2}],u={toc:c},d="wrapper";function p(e){let{components:t,...a}=e;return(0,i.kt)(d,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"authentication"},"Authentication"),(0,i.kt)("p",null,"epilot APIs use bearer tokens for authentication. All requests must include a valid token in the ",(0,i.kt)("inlineCode",{parentName:"p"},"Authorization")," header:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-http",metastring:'title="Authorization header"',title:'"Authorization','header"':!0},"Authorization: Bearer <your-token>\n")),(0,i.kt)("h2",{id:"getting-started"},"Getting Started"),(0,i.kt)("p",null,"The recommended way to authenticate with epilot APIs is using ",(0,i.kt)("strong",{parentName:"p"},"Access Tokens")," \u2014 long-lived, scoped tokens designed for integrations."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Go to ",(0,i.kt)("a",{parentName:"li",href:"https://portal.epilot.cloud/app/tokens"},"Settings > Access Tokens")," in the epilot portal"),(0,i.kt)("li",{parentName:"ol"},"Create a new token, optionally scoping it to specific roles"),(0,i.kt)("li",{parentName:"ol"},"Pass the token as a bearer token in your API requests")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"import { getClient } from '@epilot/entity-client';\n\nconst entityClient = getClient();\nentityClient.defaults.headers['Authorization'] = 'Bearer <your-access-token>';\n")),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"/docs/auth/access-tokens"},"Access Tokens")," for full details on creating, scoping and revoking tokens."),(0,i.kt)("h2",{id:"how-it-works"},"How It Works"),(0,i.kt)("p",null,"epilot authentication is built on ",(0,i.kt)("a",{parentName:"p",href:"https://oauth.net/2/"},"OAuth 2.0")," with ",(0,i.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-user-identity-pools.html"},"Amazon Cognito User Pools")," as the identity provider. Each epilot tenant has its own Cognito User Pool."),(0,i.kt)("p",null,"When a user logs in to the epilot portal, Cognito issues short-lived OAuth tokens (60 min). For API integrations, the ",(0,i.kt)("a",{parentName:"p",href:"/api/access-token"},"Access Token service")," issues long-lived JWTs with claims compatible with Cognito tokens, so all epilot APIs accept them seamlessly."),(0,i.kt)("p",null,"All tokens are verified by the API Gateway authorizer using JWKS endpoints before reaching backend services."),(0,i.kt)(o.G,{chart:"sequenceDiagram\n    participant Client\n    participant API Gateway\n    participant Cognito / Access Token Service\n    participant Backend API\n\n    Client->>Cognito / Access Token Service: Authenticate (login or access token)\n    Cognito / Access Token Service--\x3e>Client: JWT Bearer Token\n    Client->>API Gateway: Request + Authorization: Bearer <token>\n    API Gateway->>API Gateway: Verify JWT via JWKS\n    API Gateway->>Backend API: Forward request with verified claims\n    Backend API--\x3e>Client: Response",mdxType:"Mermaid"}),(0,i.kt)("h2",{id:"token-types"},"Token Types"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Token"),(0,i.kt)("th",{parentName:"tr",align:null},"Lifetime"),(0,i.kt)("th",{parentName:"tr",align:null},"Use case"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"Access Token")),(0,i.kt)("td",{parentName:"tr",align:null},"Long-lived"),(0,i.kt)("td",{parentName:"tr",align:null},"Server-side API integrations, scripts, third-party apps")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"OAuth 2.0 Token")),(0,i.kt)("td",{parentName:"tr",align:null},"60 minutes"),(0,i.kt)("td",{parentName:"tr",align:null},"Interactive user sessions in the epilot portal")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"Publishable Token")),(0,i.kt)("td",{parentName:"tr",align:null},"Long-lived"),(0,i.kt)("td",{parentName:"tr",align:null},"Client-side public apps (journeys, portals)")))),(0,i.kt)("p",null,"For most integrations, ",(0,i.kt)("strong",{parentName:"p"},"Access Tokens")," are the right choice. See ",(0,i.kt)("a",{parentName:"p",href:"/docs/auth/token-types"},"Token Types")," for a full comparison."),(0,i.kt)("h2",{id:"see-also"},"See Also"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/auth/access-tokens"},"Access Tokens")," \u2014 creating and managing scoped tokens"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/auth/token-types"},"Token Types")," \u2014 comparison of all epilot token types"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/auth/authorization"},"Authorization")," \u2014 how API requests are authorized"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/auth/permissions"},"Permissions")," \u2014 role-based access control and grants"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/auth/mfa"},"Multi-Factor Authentication")," -- TOTP and SMS second factor"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/auth/passwordless"},"Passwordless Login")," -- email-based sign-in links"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/auth/passkeys"},"Passkeys")," -- phishing-resistant biometric and hardware key authentication"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/sso/single-sign-on"},"SSO")," \u2014 single sign-on with OIDC and SAML")))}p.isMDXComponent=!0}}]);