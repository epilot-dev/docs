"use strict";(self.webpackChunkepilot_dev_handbook=self.webpackChunkepilot_dev_handbook||[]).push([[15929],{35722:(e,t,a)=>{a.d(t,{G:()=>m});var n=a(42858),i=a(67294),o=a(25108);let r=0,s=!1;const d=(e,t)=>{const a=e?.getAttribute("data-theme")??"light",n="dark"===a?"dark":"default";return t?.theme?.[a]??t?.mermaid?.theme??n},m=e=>{let{chart:t,config:a}=e;const m=(0,i.useRef)(null),l=(0,i.useRef)("mermaid-"+r++),[u,p]=(0,i.useState)(""),c=(0,i.useMemo)((()=>"string"==typeof a?JSON.parse(a):a),[a]);return(0,i.useEffect)((()=>{if("undefined"==typeof window)return;const e=document.querySelector("html"),a=d(e,c);s||(n.Z.initialize({startOnLoad:!1,theme:a,...c?.mermaid||{}}),s=!0);(async()=>{try{const{svg:e}=await n.Z.render(l.current,t);p(e)}catch(e){o.error("Mermaid rendering failed:",e)}})()}),[t,c]),(0,i.useEffect)((()=>{if("undefined"==typeof window)return;const e=document.querySelector("html"),a=new MutationObserver((a=>{for(const i of a){if("attributes"!==i.type||"data-theme"!==i.attributeName)continue;const a=d(e,c);s=!1,n.Z.initialize({startOnLoad:!1,theme:a,...c?.mermaid||{}}),s=!0,l.current="mermaid-"+r++,n.Z.render(l.current,t).then((e=>{let{svg:t}=e;p(t)}));break}}));return a.observe(e,{attributes:!0}),()=>a.disconnect()}),[t,c]),"undefined"==typeof window?i.createElement("div",{className:"mermaid"},t):i.createElement("div",{ref:m,dangerouslySetInnerHTML:{__html:u}})}},17964:(e,t,a)=>{a.r(t),a.d(t,{contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>d});var n=a(87462),i=(a(67294),a(3905));a(35722);const o={sidebar_position:2,title:"Trigger: Automation Action"},r="Automation Trigger Webhook",s={unversionedId:"integrations/webhooks/payload-structure/automation-trigger",id:"integrations/webhooks/payload-structure/automation-trigger",title:"Trigger: Automation Action",description:"When you select the Automation Trigger Webhook event, the webhook fires from within an automation flow. The payload includes metadata, entity, and optionally relations and activity.",source:"@site/docs/integrations/webhooks/payload-structure/automation-trigger.md",sourceDirName:"integrations/webhooks/payload-structure",slug:"/integrations/webhooks/payload-structure/automation-trigger",permalink:"/docs/integrations/webhooks/payload-structure/automation-trigger",editUrl:"https://github.com/epilot-dev/docs/edit/main/docs/integrations/webhooks/payload-structure/automation-trigger.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,title:"Trigger: Automation Action"},sidebar:"docsSidebar",previous:{title:"Common Data Structure",permalink:"/docs/integrations/webhooks/payload-structure/intro"},next:{title:"JSONata Customization",permalink:"/docs/integrations/webhooks/payload-structure/customization"}},d=[{value:"1. Manual Trigger / Entity Created | Updated",id:"1-manual-trigger--entity-created--updated",children:[],level:2},{value:"2. Journey Submissions",id:"2-journey-submissions",children:[{value:"Example Journey Submission",id:"example-journey-submission",children:[],level:3}],level:2}],m={toc:d},l="wrapper";function u(e){let{components:t,...o}=e;return(0,i.kt)(l,(0,n.Z)({},m,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"automation-trigger-webhook"},"Automation Trigger Webhook"),(0,i.kt)("p",null,"When you select the ",(0,i.kt)("inlineCode",{parentName:"p"},"Automation Trigger Webhook")," event, the webhook fires from within an automation flow. The payload includes ",(0,i.kt)("inlineCode",{parentName:"p"},"metadata"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"entity"),", and optionally ",(0,i.kt)("inlineCode",{parentName:"p"},"relations")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"activity"),"."),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"The ",(0,i.kt)("inlineCode",{parentName:"p"},"entity")," object always contains the entity the automation was triggered on. For a ",(0,i.kt)("inlineCode",{parentName:"p"},"Manual trigger: Contact"),", this is the contact. For an ",(0,i.kt)("inlineCode",{parentName:"p"},"Entity update: Opportunity"),", this is the opportunity."))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Automation Trigger",src:a(58239).Z,width:"800",height:"425"})),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"The example payload playground in the automation action view generates approximate payloads using the ",(0,i.kt)("a",{parentName:"p",href:"/api/entity#tag/Schemas/operation/getSchemaExample"},"getSchemaExample")," endpoint. This is accurate for manual triggers but may differ for journey submissions, where the payload structure depends on the journey's blocks and configuration."))),(0,i.kt)("p",null,"Currently there are 2 important trigger types for webhooks:"),(0,i.kt)("h2",{id:"1-manual-trigger--entity-created--updated"},"1. Manual Trigger / Entity Created | Updated"),(0,i.kt)("p",null,"For triggers like ",(0,i.kt)("inlineCode",{parentName:"p"},"Manual Trigger: Contact")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"Entity Created: Contact"),", the ",(0,i.kt)("inlineCode",{parentName:"p"},"entity")," object contains the full contact entity data. To see the exact schema, export the JSON schema from the entity detail view in the epilot portal."),(0,i.kt)("p",null,"You can also use the Entity API to retrieve a ",(0,i.kt)("a",{parentName:"p",href:"/api/entity#tag/Schemas/operation/getJsonSchema"},"JSON schema")," or a ",(0,i.kt)("a",{parentName:"p",href:"/api/entity#tag/Schemas/operation/getSchemaExample"},"JSON example")," programmatically."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Export Entity Schema",src:a(69461).Z,width:"464",height:"163"})),(0,i.kt)("h2",{id:"2-journey-submissions"},"2. Journey Submissions"),(0,i.kt)("p",null,"Journey submission payloads are generated dynamically based on the journey's block configuration. The raw submission data is mapped to entity schemas (contact, opportunity, etc.) during automation execution."),(0,i.kt)("p",null,"Key attributes in the submission payload:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"mapped_entities"))," \u2014 Array of entities created during the automation execution"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"line_items"))," \u2014 Array of orders configured in the journey")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Action Webhook Payload",src:a(61186).Z,width:"2664",height:"1220"})),(0,i.kt)("h3",{id:"example-journey-submission"},"Example Journey Submission"))}u.isMDXComponent=!0},69461:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/export-entity-schema-15a09578778b7b08492f5659ee3e123f.png"},61186:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/automation-action-payload-71809b0043aaa845946d7b605f99d553.png"},58239:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/automation-trigger-a611d2ed5636c85f734701cf97c2a403.gif"}}]);