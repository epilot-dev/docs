"use strict";(self.webpackChunkepilot_dev_handbook=self.webpackChunkepilot_dev_handbook||[]).push([[51483],{35722:(e,t,n)=>{n.d(t,{G:()=>p});var i=n(42858),o=n(67294),a=n(25108);let r=0,l=!1;const s=(e,t)=>{const n=e?.getAttribute("data-theme")??"light",i="dark"===n?"dark":"default";return t?.theme?.[n]??t?.mermaid?.theme??i},p=e=>{let{chart:t,config:n}=e;const p=(0,o.useRef)(null),u=(0,o.useRef)("mermaid-"+r++),[d,c]=(0,o.useState)(""),m=(0,o.useMemo)((()=>"string"==typeof n?JSON.parse(n):n),[n]);return(0,o.useEffect)((()=>{if("undefined"==typeof window)return;const e=document.querySelector("html"),n=s(e,m);l||(i.Z.initialize({startOnLoad:!1,theme:n,...m?.mermaid||{}}),l=!0);(async()=>{try{const{svg:e}=await i.Z.render(u.current,t);c(e)}catch(e){a.error("Mermaid rendering failed:",e)}})()}),[t,m]),(0,o.useEffect)((()=>{if("undefined"==typeof window)return;const e=document.querySelector("html"),n=new MutationObserver((n=>{for(const o of n){if("attributes"!==o.type||"data-theme"!==o.attributeName)continue;const n=s(e,m);l=!1,i.Z.initialize({startOnLoad:!1,theme:n,...m?.mermaid||{}}),l=!0,u.current="mermaid-"+r++,i.Z.render(u.current,t).then((e=>{let{svg:t}=e;c(t)}));break}}));return n.observe(e,{attributes:!0}),()=>n.disconnect()}),[t,m]),"undefined"==typeof window?o.createElement("div",{className:"mermaid"},t):o.createElement("div",{ref:p,dangerouslySetInnerHTML:{__html:d}})}},27087:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>r,default:()=>d,frontMatter:()=>a,metadata:()=>l,toc:()=>s});var i=n(87462),o=(n(67294),n(3905));n(35722);const a={sidebar_position:3},r="Embedding Journeys",l={unversionedId:"journeys/embedding",id:"journeys/embedding",title:"Embedding Journeys",description:"Embed any epilot journey on your website using a script tag. The embed script loads the journey by its ID and renders it in an iframe on your page.",source:"@site/docs/journeys/embedding.md",sourceDirName:"journeys",slug:"/journeys/embedding",permalink:"/docs/journeys/embedding",editUrl:"https://github.com/epilot-dev/docs/edit/main/docs/journeys/embedding.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"docsSidebar",previous:{title:"Design Builder",permalink:"/docs/journeys/design-builder"},next:{title:"Submissions",permalink:"/docs/journeys/submissions"}},s=[{value:"Embed Configurator",id:"embed-configurator",children:[],level:2},{value:"Journey Data Injection",id:"journey-data-injection",children:[],level:2},{value:"Configuration Possibilities",id:"configuration-possibilities",children:[{value:"init",id:"init",children:[],level:3},{value:"update",id:"update",children:[],level:3},{value:"on",id:"on",children:[],level:3},{value:"enterFullScreen",id:"enterfullscreen",children:[],level:3},{value:"exitFullScreen",id:"exitfullscreen",children:[],level:3},{value:"isInitialized",id:"isinitialized",children:[],level:3}],level:2},{value:"Scenarios",id:"scenarios",children:[{value:"Full-Screen",id:"full-screen",children:[],level:3},{value:"Inline",id:"inline",children:[],level:3},{value:"Multiple Journeys",id:"multiple-journeys",children:[],level:3}],level:2}],p={toc:s},u="wrapper";function d(e){let{components:t,...a}=e;return(0,o.kt)(u,(0,i.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"embedding-journeys"},"Embedding Journeys"),(0,o.kt)("p",null,"Embed any epilot journey on your website using a script tag. The embed script loads the journey by its ID and renders it in an iframe on your page."),(0,o.kt)("p",null,"This guide covers all available embedding options and the ",(0,o.kt)("inlineCode",{parentName:"p"},"__epilot")," JavaScript API for advanced customization."),(0,o.kt)("h2",{id:"embed-configurator"},"Embed Configurator"),(0,o.kt)("p",null,"Configure and copy the embed script via the Journey Builder's Embed Configurator after saving your journey. Options include:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Display mode")," \u2014 full-screen overlay or inline on your website (Default: Fullscreen)"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Language")," (Default: German DE)"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Button label")," \u2014 the text on the button that opens the journey (Default: Inhalt anzeigen)"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Button alignment")," \u2014 left, right, or center (Default: Left)"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Scroll to top")," \u2014 scrolls to the top of the journey when the user navigates to a new step (Default: ON)")),(0,o.kt)("p",null,"Additional settings are available depending on the embedding type."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Embedding Configuration",src:n(63677).Z,width:"3024",height:"1714"})),(0,o.kt)("h2",{id:"journey-data-injection"},"Journey Data Injection"),(0,o.kt)("p",null,"The embed script can modify the initial state of a journey. You can:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Prefill data")," \u2014 set initial values for journey blocks."),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Start from a specific step")," \u2014 skip earlier steps (e.g., when product selection happens on an external website)."),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Control field display")," \u2014 disable specific fields.")),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"DataInjectionOptions")," type below defines all available options. See the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/epilot-dev/epilot-journey-sdk/tree/main/examples/embed-script"},"Embed Script examples")," for working code."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Type Definition")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="DataInjectionOptions"',title:'"DataInjectionOptions"'},"export type DataInjectionOptions = {\n  /** the initial step index of the journey. aka, where to start the journey from */\n  initialStepIndex?: number\n  /** \n   * the initial state of the journey. aka, what data to prefill the journey with \n   * Read section below to understand how to populate this\n   * */\n  initialState?: Record<string, unknown>[]\n  /** the display options to be passed to the journey, for now it is used to disable some fields */\n  blocksDisplaySettings?: BlockDisplaySetting[]\n}\n")),(0,o.kt)("p",null,"To populate ",(0,o.kt)("inlineCode",{parentName:"p"},"initialState")," in ",(0,o.kt)("inlineCode",{parentName:"p"},"DataInjectionOptions")," properly, open the journey in ",(0,o.kt)("strong",{parentName:"p"},"debug mode")," (see video below) and copy the journey state per step."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Journey Embed Mode",src:n(48552).Z,width:"800",height:"478"})),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Note"),": ",(0,o.kt)("inlineCode",{parentName:"p"},"initialState")," must be filled sequentially based on the order of steps; steps that are not injected into must be an ",(0,o.kt)("strong",{parentName:"p"},"empty object"),".\nSee example below to inject data into Step 2 and Step 3. Notice that Step 1 needs to be empty for this to work properly"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",2:!0,className:"language-typescript",metastring:'title="Injecting data into Steps 2 and 3"',title:'"Injecting',data:!0,into:!0,Steps:!0,and:!0,'3"':!0},'  initialState: [\n    {},\n    {\n      "Binary Input": false,\n    },\n    {\n      "Personal Data Input": {\n        "salutation": "Ms. / Mrs.",\n        "firstName": "Test Name",\n        "lastName": "",\n        "email": "",\n        "telephone": "",\n        "_isValid": false\n      }\n    },\n    {}\n  ]\n}\n')),(0,o.kt)("h2",{id:"configuration-possibilities"},"Configuration Possibilities"),(0,o.kt)("p",null,"For more advanced configuration options, you can modify the embed script yourself, as it adds an interface to your website to interact with the journey: ",(0,o.kt)("inlineCode",{parentName:"p"},"__epilot"),"\nBelow are all available configuration options."),(0,o.kt)("h3",{id:"init"},"init"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Description"),(0,o.kt)("br",{parentName:"p"}),"\n","Used to initialize one or more journeys given individual options. Multiple Journeys with different configurations can be passed"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Type Definition")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"type Init = (options?: OptionsInit[] | undefined, initOnLoad?: boolean) => void\ntype JourneyMode = 'inline' | 'full-screen'\n\ntype OptionsInit = {\n  /** id of the journey to initialise (load configuration) */\n  journeyId: string\n  /** url to override iframe src */\n  journeyUrl?: string\n  /** mode the journey runs in -> inline | full-screen */\n  mode: JourneyMode\n  /** the minimum height the journey runs in when in inline mode */\n  minHeight?: string\n  /**\n   * whether to show or hide the topBar\n   * @default true\n   */\n  topBar?: boolean\n  /**\n   * whether to scroll to the top after step navigation\n   * @default true\n   */\n  scrollToTop?: boolean\n  /**\n   * whether to show the closeButton if in inline mode\n   * @default true\n   */\n  closeButton?: boolean\n  /** additional data passed to the journey + submission */\n  contextData?: Record<string, unknown>\n  /** the language the journey should be initialised in */\n  lang?: string\n  /** the data injext options that will be passed to the journey */\n  dataInjectionOptions?: DataInjectionOptions\n  /**\n   * Used as iframe name/title attribute if provided\n   */\n  name?: string\n}\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Usage")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"__epilot.init([{ journeyId: '123', mode: 'full-screen', topBar: false }])\n")),(0,o.kt)("h3",{id:"update"},"update"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Description"),(0,o.kt)("br",{parentName:"p"}),"\n","Used to update an initialized journey by passed options."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Type Definition")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"type Update = (journeyId: string, payload?: OptionsUpdate) => void\ntype OptionsUpdate = Omit<OptionsInit, 'journeyId'>\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Usage")),(0,o.kt)("p",null,"The update method updates a journey's embed configuration.",(0,o.kt)("br",{parentName:"p"}),"\n","Note: This does not update the initial state set by ",(0,o.kt)("inlineCode",{parentName:"p"},"dataInjectionOptions"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"__epilot.update('123', { journeyId: '123', mode: 'full-screen', topBar: false })\n")),(0,o.kt)("h3",{id:"on"},"on"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Description"),(0,o.kt)("br",{parentName:"p"}),"\n","Sets up an event listener to execute custom logic based on journey events."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Uses cases:")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Execute logging, or tracking"),(0,o.kt)("li",{parentName:"ul"},"Adjust website CSS, e.g. if full screen exited")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Type Definition")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"type JourneyEvent =\n  | 'init'\n  | 'enterFullScreen'\n  | 'exitFullScreen'\n  | 'closeJourney'\n\ntype On = (\n  eventName: JourneyEvent,\n  cb: (payload: Record<string, unknown>, event: CustomEvent) => void\n) => void\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Usage")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"__epilot.on('init', function ({ journeys }) {\n  console.log('Journey Initialized')\n})\n")),(0,o.kt)("h3",{id:"enterfullscreen"},"enterFullScreen"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Description"),(0,o.kt)("br",{parentName:"p"}),"\n","If a journey is initialized in full-screen mode, executes the command to open the journey."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Type Definition")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"type EnterFullScreen = (\n  journeyId: string,\n  payload?: Record<string, unknown> | undefined\n) => void\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Usage")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"__epilot.enterFullScreen('123')\n")),(0,o.kt)("h3",{id:"exitfullscreen"},"exitFullScreen"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Description"),(0,o.kt)("br",{parentName:"p"}),"\n","If a journey is in full-screen mode, executes the command to close the journey. It is also internally used at the Journeys \u201cClose button\u201d."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Type Definition")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"type ExitFullScreen = (\n  journeyId: string,\n  payload?: Record<string, unknown> | undefined\n) => void\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Usage")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"__epilot.exitFullScreen('123')\n")),(0,o.kt)("h3",{id:"isinitialized"},"isInitialized"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Description"),(0,o.kt)("br",{parentName:"p"}),"\n","Checks whether a journey is already initialized."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Type Definition")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"type IsInitialized = (journeyId: string) => boolean\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Usage")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"if (__epilot.isInitialized('123') === true) {\n  __epilot.enterFullScreen('123')\n}\n")),(0,o.kt)("h2",{id:"scenarios"},"Scenarios"),(0,o.kt)("h3",{id:"full-screen"},"Full-Screen"),(0,o.kt)("p",null,"The default embed method covers most of the use cases. A button will be placed on your website which opens the journey, covering the complete screen when clicked."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code Snippet"),(0,o.kt)("br",{parentName:"p"}),"\n","The below code snippet provides the configured embed script and a button opening the journey when clicked. Don\u2019t forget to change the placeholder ids to your own journey ids!"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html",metastring:'title="Full-screen embed"',title:'"Full-screen','embed"':!0},'\x3c!-- Clicking this button will open your Journey --\x3e\n<button onclick="__epilot.enterFullScreen(\'<your-journey-id>\')">\n  Open Journey\n</button>\n\n\x3c!-- Embed script managing your Journey --\x3e\n<script\n  data-ep-mode="full-screen"\n  data-ep-journeyIds="<your-journey-id>"\n  src="https://embed.journey.epilot.io/bundle.js"\n><\/script>\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Attributes explained"),(0,o.kt)("br",{parentName:"p"}),"\n",(0,o.kt)("inlineCode",{parentName:"p"},"data-ep-mode")," \u2014 sets the mode the journey runs in\n",(0,o.kt)("inlineCode",{parentName:"p"},"data-ep-journeyIds")," \u2014 the journey to load by its ID"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Outcome")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Embedding Fullscreen Outcome",src:n(32916).Z,width:"600",height:"413"})),(0,o.kt)("h3",{id:"inline"},"Inline"),(0,o.kt)("p",null,"This method will place the journey into a provided container element, or, if not provided, at the end of the web page. The height of the journey will automatically be recalculated based on the current content. In order to provide a better user experience, navigating to a different step will cause the browser to move back to the top position of the journey. The close button of the top bar is hidden."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code Snippet"),(0,o.kt)("br",{parentName:"p"}),"\n","The below code snippet provides the configured embed script required to set up the inline mode and a container where the journey is being placed in. Don\u2019t forget to change the placeholder ids to your own journey ids!"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html",metastring:'title="Inline embed"',title:'"Inline','embed"':!0},'\x3c!-- Your Journey will go into this container --\x3e\n<div id="epilot-journey-<your-journey-id>"></div>\n\n\x3c!-- Embed script managing your Journey --\x3e\n<script\n  data-ep-mode="inline"\n  data-ep-journeyIds="<your-journey-id>"\n  src="https://embed.journey.epilot.io/bundle.js"\n><\/script>\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Attributes explained"),(0,o.kt)("br",{parentName:"p"}),"\n",(0,o.kt)("inlineCode",{parentName:"p"},"data-ep-mode")," - sets the mode the journey runs in\n",(0,o.kt)("inlineCode",{parentName:"p"},"data-ep-journeyIds")," \u2014 the journey to load by its ID"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Outcome")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Embedding Inline Outcome",src:n(67815).Z,width:"600",height:"413"})),(0,o.kt)("h3",{id:"multiple-journeys"},"Multiple Journeys"),(0,o.kt)("p",null,"The best way to embed multiple journeys is to use the ",(0,o.kt)("inlineCode",{parentName:"p"},"__epilot")," interface described ",(0,o.kt)("a",{parentName:"p",href:"#init"},"here"),". Simply pass multiple items to the ",(0,o.kt)("inlineCode",{parentName:"p"},"init")," function"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code Snippet")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html",metastring:'title="Multiple journeys embed"',title:'"Multiple',journeys:!0,'embed"':!0},"<button onclick=\"__epilot.enterFullScreen('<your-journey-id-1>')\">\n  Open Journey\n</button>\n<button onclick=\"__epilot.enterFullScreen('<your-journey-id-2>')\">\n  Open Journey\n</button>\n<script src=\"https://embed.journey.epilot.io/bundle.js\"><\/script>\n<script>\n  __epilot.init([\n    { journeyId: '<your-journey-id-1>', mode: 'full-screen' },\n    { journeyId: '<your-journey-id-2>', mode: 'full-screen' },\n  ])\n<\/script>\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Attributes explained"),(0,o.kt)("br",{parentName:"p"}),"\n","In this example, no ",(0,o.kt)("inlineCode",{parentName:"p"},"data-ep-")," attributes are needed because the ",(0,o.kt)("inlineCode",{parentName:"p"},"__epilot.init()")," API handles configuration directly."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Outcome")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Embedding Multiple Outcome",src:n(53506).Z,width:"600",height:"413"})))}d.isMDXComponent=!0},63677:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/journey-builder-embed-ced88e3a7f746f8dcca9f1c63d930105.png"},48552:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/journey-debug-mode-c249fac23ff08314049832e62a7cfaa6.gif"},32916:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/journey-embed-outcome-full-screen-023e0754cfa61f530e3ecdfacb599aac.gif"},67815:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/journey-embed-outcome-inline-eb5aeccb3cd7faa68d75582f0edb21da.gif"},53506:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/journey-embed-outcome-multiple-90919aac618ad72da3950ecbf1e19574.gif"}}]);