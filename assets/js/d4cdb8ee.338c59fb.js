"use strict";(self.webpackChunkepilot_dev_handbook=self.webpackChunkepilot_dev_handbook||[]).push([[26764],{35722:(e,t,a)=>{a.d(t,{G:()=>o});var l=a(42858),n=a(67294),i=a(25108);let r=0,d=!1;const s=(e,t)=>{const a=e?.getAttribute("data-theme")??"light",l="dark"===a?"dark":"default";return t?.theme?.[a]??t?.mermaid?.theme??l},o=e=>{let{chart:t,config:a}=e;const o=(0,n.useRef)(null),c=(0,n.useRef)("mermaid-"+r++),[u,p]=(0,n.useState)(""),k=(0,n.useMemo)((()=>"string"==typeof a?JSON.parse(a):a),[a]);return(0,n.useEffect)((()=>{if("undefined"==typeof window)return;const e=document.querySelector("html"),a=s(e,k);d||(l.Z.initialize({startOnLoad:!1,theme:a,...k?.mermaid||{}}),d=!0);(async()=>{try{const{svg:e}=await l.Z.render(c.current,t);p(e)}catch(e){i.error("Mermaid rendering failed:",e)}})()}),[t,k]),(0,n.useEffect)((()=>{if("undefined"==typeof window)return;const e=document.querySelector("html"),a=new MutationObserver((a=>{for(const n of a){if("attributes"!==n.type||"data-theme"!==n.attributeName)continue;const a=s(e,k);d=!1,l.Z.initialize({startOnLoad:!1,theme:a,...k?.mermaid||{}}),d=!0,c.current="mermaid-"+r++,l.Z.render(c.current,t).then((e=>{let{svg:t}=e;p(t)}));break}}));return a.observe(e,{attributes:!0}),()=>a.disconnect()}),[t,k]),"undefined"==typeof window?n.createElement("div",{className:"mermaid"},t):n.createElement("div",{ref:o,dangerouslySetInnerHTML:{__html:u}})}},73468:(e,t,a)=>{a.r(t),a.d(t,{contentTitle:()=>r,default:()=>u,frontMatter:()=>i,metadata:()=>d,toc:()=>s});var l=a(87462),n=(a(67294),a(3905));a(35722);const i={},r=void 0,d={unversionedId:"deadlines/deadlines-library/index/classes/DeadlineCalculator",id:"deadlines/deadlines-library/index/classes/DeadlineCalculator",title:"DeadlineCalculator",description:"@epilot/switching-deadlines",source:"@site/docs/deadlines/deadlines-library/index/classes/DeadlineCalculator.md",sourceDirName:"deadlines/deadlines-library/index/classes",slug:"/deadlines/deadlines-library/index/classes/DeadlineCalculator",permalink:"/docs/deadlines/deadlines-library/index/classes/DeadlineCalculator",editUrl:"https://github.com/epilot-dev/docs/edit/main/docs/deadlines/deadlines-library/index/classes/DeadlineCalculator.md",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"CalendarProvider",permalink:"/docs/deadlines/deadlines-library/index/classes/CalendarProvider"},next:{title:"Bundesland",permalink:"/docs/deadlines/deadlines-library/index/enumerations/Bundesland"}},s=[{value:"Example",id:"example",children:[],level:2},{value:"Constructors",id:"constructors",children:[{value:"Constructor",id:"constructor",children:[{value:"Parameters",id:"parameters",children:[{value:"options?",id:"options",children:[],level:5}],level:4},{value:"Returns",id:"returns",children:[],level:4},{value:"Example",id:"example-1",children:[],level:4}],level:3}],level:2},{value:"Methods",id:"methods",children:[{value:"calculateEarliestStartDate()",id:"calculateearlieststartdate",children:[{value:"Parameters",id:"parameters-1",children:[{value:"switchingCase",id:"switchingcase",children:[],level:5},{value:"fromDate?",id:"fromdate",children:[],level:5}],level:4},{value:"Returns",id:"returns-1",children:[{value:"calendarDaysTotal",id:"calendardaystotal",children:[],level:5},{value:"earliestStartDate",id:"earlieststartdate",children:[],level:5},{value:"earliestStartDateString",id:"earlieststartdatestring",children:[],level:5},{value:"isRetrospective",id:"isretrospective",children:[],level:5},{value:"ruleApplied",id:"ruleapplied",children:[],level:5},{value:"workingDaysApplied",id:"workingdaysapplied",children:[],level:5}],level:4},{value:"Throws",id:"throws",children:[],level:4}],level:3},{value:"getRule()",id:"getrule",children:[{value:"Parameters",id:"parameters-2",children:[{value:"switchingCase",id:"switchingcase-1",children:[],level:5}],level:4},{value:"Returns",id:"returns-2",children:[],level:4}],level:3},{value:"getRules()",id:"getrules",children:[{value:"Returns",id:"returns-3",children:[],level:4}],level:3},{value:"validateStartDate()",id:"validatestartdate",children:[{value:"Parameters",id:"parameters-3",children:[{value:"switchingCase",id:"switchingcase-2",children:[],level:5},{value:"proposedDate",id:"proposeddate",children:[],level:5},{value:"fromDate?",id:"fromdate-1",children:[],level:5}],level:4},{value:"Returns",id:"returns-4",children:[{value:"earliestValidDate?",id:"earliestvaliddate",children:[],level:5},{value:"isValid",id:"isvalid",children:[],level:5},{value:"ruleApplied",id:"ruleapplied-1",children:[],level:5}],level:4}],level:3}],level:2}],o={toc:s},c="wrapper";function u(e){let{components:t,...a}=e;return(0,n.kt)(c,(0,l.Z)({},o,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"/docs/deadlines/deadlines-library/"},(0,n.kt)("strong",{parentName:"a"},"@epilot/switching-deadlines"))),(0,n.kt)("hr",null),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"/docs/deadlines/deadlines-library/modules"},"@epilot/switching-deadlines")," / ",(0,n.kt)("a",{parentName:"p",href:"/docs/deadlines/deadlines-library/index/"},"index")," / DeadlineCalculator"),(0,n.kt)("h1",{id:"class-deadlinecalculator"},"Class: DeadlineCalculator"),(0,n.kt)("p",null,"Defined in: ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/epilot-dev/switching-deadlines/blob/399b2cc39d63ef20d5c31e06d92ee448511e691c/src/deadlines-calculator.ts#L47"},"deadlines-calculator.ts:47")),(0,n.kt)("p",null,"Calculator for determining deadline dates and validating start dates for utility switching cases."),(0,n.kt)("p",null,"Handles different switching scenarios including power and gas contracts,\nwith support for various use cases (relocation or supplier switch) and termination requirements.\nCan calculate both forward-looking and retrospective switching deadlines based on\nconfigurable business rules and working day calendars."),(0,n.kt)("h2",{id:"example"},"Example"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-typescript"},"const calculator = new DeadlineCalculator()\n\nconst result = calculator.calculateEarliestStartDate({\n  commodity: 'power',\n  useCase: 'relocation',\n  requiresTermination: false\n})\n\nconsole.log(result.earliestStartDate)\n")),(0,n.kt)("h2",{id:"constructors"},"Constructors"),(0,n.kt)("h3",{id:"constructor"},"Constructor"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"new DeadlineCalculator"),"(",(0,n.kt)("inlineCode",{parentName:"p"},"options?"),"): ",(0,n.kt)("inlineCode",{parentName:"p"},"DeadlineCalculator"))),(0,n.kt)("p",null,"Defined in: ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/epilot-dev/switching-deadlines/blob/399b2cc39d63ef20d5c31e06d92ee448511e691c/src/deadlines-calculator.ts#L68"},"deadlines-calculator.ts:68")),(0,n.kt)("p",null,"Creates a new DeadlineCalculator instance."),(0,n.kt)("h4",{id:"parameters"},"Parameters"),(0,n.kt)("h5",{id:"options"},"options?"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"/docs/deadlines/deadlines-library/index/interfaces/DeadlineCalculatorOptions"},(0,n.kt)("inlineCode",{parentName:"a"},"DeadlineCalculatorOptions"))),(0,n.kt)("p",null,"Optional configuration options for the calculator."),(0,n.kt)("h4",{id:"returns"},"Returns"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"DeadlineCalculator")),(0,n.kt)("h4",{id:"example-1"},"Example"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-typescript"},"// Default: built-in calendar + default rules\nconst calc = new DeadlineCalculator();\n\n// With a custom calendar and rules\nconst calcCustom = new DeadlineCalculator({\n  calendarProvider: new CalendarProvider(),\n  customRules: [], // custom DeadlineRule objects\n});\n")),(0,n.kt)("h2",{id:"methods"},"Methods"),(0,n.kt)("h3",{id:"calculateearlieststartdate"},"calculateEarliestStartDate()"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"calculateEarliestStartDate"),"(",(0,n.kt)("inlineCode",{parentName:"p"},"switchingCase"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"fromDate?"),"): ",(0,n.kt)("inlineCode",{parentName:"p"},"object"))),(0,n.kt)("p",null,"Defined in: ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/epilot-dev/switching-deadlines/blob/399b2cc39d63ef20d5c31e06d92ee448511e691c/src/deadlines-calculator.ts#L91"},"deadlines-calculator.ts:91")),(0,n.kt)("p",null,"Calculate the earliest possible start date for a contract"),(0,n.kt)("p",null,"Determines the earliest valid start date for a new utility contract based on\nthe switching case type, applicable business rules, and working day calculations.\nHandles both standard forward switching and retrospective switching scenarios."),(0,n.kt)("h4",{id:"parameters-1"},"Parameters"),(0,n.kt)("h5",{id:"switchingcase"},"switchingCase"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"/docs/deadlines/deadlines-library/index/interfaces/SwitchingCase"},(0,n.kt)("inlineCode",{parentName:"a"},"SwitchingCase"))),(0,n.kt)("p",null,"The switching case configuration"),(0,n.kt)("h5",{id:"fromdate"},"fromDate?"),(0,n.kt)("p",null,"The date from which to calculate the deadline (defaults to current date)"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string")," | ",(0,n.kt)("inlineCode",{parentName:"p"},"Date")),(0,n.kt)("h4",{id:"returns-1"},"Returns"),(0,n.kt)("p",null,"Object containing calculated dates, applied rules, and metadata"),(0,n.kt)("h5",{id:"calendardaystotal"},"calendarDaysTotal"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"calendarDaysTotal"),": ",(0,n.kt)("inlineCode",{parentName:"p"},"number"))),(0,n.kt)("p",null,"Total calendar days between request and earliest start"),(0,n.kt)("h5",{id:"earlieststartdate"},"earliestStartDate"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"earliestStartDate"),": ",(0,n.kt)("inlineCode",{parentName:"p"},"Date"))),(0,n.kt)("p",null,"The earliest possible start date for the new contract"),(0,n.kt)("h5",{id:"earlieststartdatestring"},"earliestStartDateString"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"earliestStartDateString"),": ",(0,n.kt)("inlineCode",{parentName:"p"},"string"))),(0,n.kt)("p",null,"The earliest start date as ISO string"),(0,n.kt)("h5",{id:"isretrospective"},"isRetrospective"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"isRetrospective"),": ",(0,n.kt)("inlineCode",{parentName:"p"},"boolean"))),(0,n.kt)("p",null,"Whether this is a retrospective switch (gas only)"),(0,n.kt)("h5",{id:"ruleapplied"},"ruleApplied"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"ruleApplied"),": ",(0,n.kt)("a",{parentName:"p",href:"/docs/deadlines/deadlines-library/index/interfaces/DeadlineRule"},(0,n.kt)("inlineCode",{parentName:"a"},"DeadlineRule")))),(0,n.kt)("p",null,"The rule that was applied"),(0,n.kt)("h5",{id:"workingdaysapplied"},"workingDaysApplied"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"workingDaysApplied"),": ",(0,n.kt)("inlineCode",{parentName:"p"},"number"))),(0,n.kt)("p",null,"Number of working days applied"),(0,n.kt)("h4",{id:"throws"},"Throws"),(0,n.kt)("p",null,"When no applicable rule is found for the switching case"),(0,n.kt)("hr",null),(0,n.kt)("h3",{id:"getrule"},"getRule()"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"getRule"),"(",(0,n.kt)("inlineCode",{parentName:"p"},"switchingCase"),"): ",(0,n.kt)("inlineCode",{parentName:"p"},"undefined")," ","|"," ",(0,n.kt)("a",{parentName:"p",href:"/docs/deadlines/deadlines-library/index/interfaces/DeadlineRule"},(0,n.kt)("inlineCode",{parentName:"a"},"DeadlineRule")))),(0,n.kt)("p",null,"Defined in: ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/epilot-dev/switching-deadlines/blob/399b2cc39d63ef20d5c31e06d92ee448511e691c/src/deadlines-calculator.ts#L220"},"deadlines-calculator.ts:220")),(0,n.kt)("p",null,"Get a specific rule for a switching case"),(0,n.kt)("p",null,"Finds and returns the deadline rule that applies to the specified\nswitching case configuration. Returns undefined if no matching rule exists."),(0,n.kt)("h4",{id:"parameters-2"},"Parameters"),(0,n.kt)("h5",{id:"switchingcase-1"},"switchingCase"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"/docs/deadlines/deadlines-library/index/interfaces/SwitchingCase"},(0,n.kt)("inlineCode",{parentName:"a"},"SwitchingCase"))),(0,n.kt)("p",null,"The switching case to find a rule for"),(0,n.kt)("h4",{id:"returns-2"},"Returns"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"undefined")," ","|"," ",(0,n.kt)("a",{parentName:"p",href:"/docs/deadlines/deadlines-library/index/interfaces/DeadlineRule"},(0,n.kt)("inlineCode",{parentName:"a"},"DeadlineRule"))),(0,n.kt)("p",null,"The matching deadline rule or undefined if none found"),(0,n.kt)("hr",null),(0,n.kt)("h3",{id:"getrules"},"getRules()"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"getRules"),"(): ",(0,n.kt)("a",{parentName:"p",href:"/docs/deadlines/deadlines-library/index/interfaces/DeadlineRule"},(0,n.kt)("inlineCode",{parentName:"a"},"DeadlineRule")),"[]")),(0,n.kt)("p",null,"Defined in: ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/epilot-dev/switching-deadlines/blob/399b2cc39d63ef20d5c31e06d92ee448511e691c/src/deadlines-calculator.ts#L204"},"deadlines-calculator.ts:204")),(0,n.kt)("p",null,"Get all configured rules"),(0,n.kt)("p",null,"Returns a copy of all deadline rules currently configured in the calculator.\nUseful for debugging or displaying available switching scenarios."),(0,n.kt)("h4",{id:"returns-3"},"Returns"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"/docs/deadlines/deadlines-library/index/interfaces/DeadlineRule"},(0,n.kt)("inlineCode",{parentName:"a"},"DeadlineRule")),"[]"),(0,n.kt)("p",null,"Array of all configured deadline rules"),(0,n.kt)("hr",null),(0,n.kt)("h3",{id:"validatestartdate"},"validateStartDate()"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"validateStartDate"),"(",(0,n.kt)("inlineCode",{parentName:"p"},"switchingCase"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"proposedDate"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"fromDate?"),"): ",(0,n.kt)("inlineCode",{parentName:"p"},"object"))),(0,n.kt)("p",null,"Defined in: ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/epilot-dev/switching-deadlines/blob/399b2cc39d63ef20d5c31e06d92ee448511e691c/src/deadlines-calculator.ts#L167"},"deadlines-calculator.ts:167")),(0,n.kt)("p",null,"Validate if a proposed start date is valid"),(0,n.kt)("p",null,"Checks whether a proposed contract start date meets the minimum deadline\nrequirements for the given switching case. Compares the proposed date\nagainst the calculated earliest valid date."),(0,n.kt)("h4",{id:"parameters-3"},"Parameters"),(0,n.kt)("h5",{id:"switchingcase-2"},"switchingCase"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"/docs/deadlines/deadlines-library/index/interfaces/SwitchingCase"},(0,n.kt)("inlineCode",{parentName:"a"},"SwitchingCase"))),(0,n.kt)("p",null,"The switching case configuration"),(0,n.kt)("h5",{id:"proposeddate"},"proposedDate"),(0,n.kt)("p",null,"The date to validate"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string")," | ",(0,n.kt)("inlineCode",{parentName:"p"},"Date")),(0,n.kt)("h5",{id:"fromdate-1"},"fromDate?"),(0,n.kt)("p",null,"The date from which to calculate the deadline (defaults to current date)"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string")," | ",(0,n.kt)("inlineCode",{parentName:"p"},"Date")),(0,n.kt)("h4",{id:"returns-4"},"Returns"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"object")),(0,n.kt)("p",null,"Validation result with validity status and earliest valid alternative if invalid"),(0,n.kt)("h5",{id:"earliestvaliddate"},"earliestValidDate?"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("inlineCode",{parentName:"p"},"optional")," ",(0,n.kt)("strong",{parentName:"p"},"earliestValidDate"),": ",(0,n.kt)("inlineCode",{parentName:"p"},"Date"))),(0,n.kt)("h5",{id:"isvalid"},"isValid"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"isValid"),": ",(0,n.kt)("inlineCode",{parentName:"p"},"boolean"))),(0,n.kt)("h5",{id:"ruleapplied-1"},"ruleApplied"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"ruleApplied"),": ",(0,n.kt)("a",{parentName:"p",href:"/docs/deadlines/deadlines-library/index/interfaces/DeadlineRule"},(0,n.kt)("inlineCode",{parentName:"a"},"DeadlineRule")))))}u.isMDXComponent=!0}}]);