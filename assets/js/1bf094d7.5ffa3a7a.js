"use strict";(self.webpackChunkepilot_dev_handbook=self.webpackChunkepilot_dev_handbook||[]).push([[7534],{3905:(e,a,t)=>{t.d(a,{Zo:()=>p,kt:()=>h});var n=t(67294);function l(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function r(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?r(Object(t),!0).forEach((function(a){l(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function s(e,a){if(null==e)return{};var t,n,l=function(e,a){if(null==e)return{};var t,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||(l[t]=e[t]);return l}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var d=n.createContext({}),o=function(e){var a=n.useContext(d),t=a;return e&&(t="function"==typeof e?e(a):i(i({},a),e)),t},p=function(e){var a=o(e.components);return n.createElement(d.Provider,{value:a},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},c=n.forwardRef((function(e,a){var t=e.components,l=e.mdxType,r=e.originalType,d=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=o(t),c=l,h=m["".concat(d,".").concat(c)]||m[c]||u[c]||r;return t?n.createElement(h,i(i({ref:a},p),{},{components:t})):n.createElement(h,i({ref:a},p))}));function h(e,a){var t=arguments,l=a&&a.mdxType;if("string"==typeof e||l){var r=t.length,i=new Array(r);i[0]=c;var s={};for(var d in a)hasOwnProperty.call(a,d)&&(s[d]=a[d]);s.originalType=e,s[m]="string"==typeof e?e:l,i[1]=s;for(var o=2;o<r;o++)i[o]=t[o];return n.createElement.apply(null,i)}return n.createElement.apply(null,t)}c.displayName="MDXCreateElement"},36580:(e,a,t)=>{t.r(a),t.d(a,{contentTitle:()=>i,default:()=>m,frontMatter:()=>r,metadata:()=>s,toc:()=>d});var n=t(87462),l=(t(67294),t(3905));const r={sidebar_position:4},i="Template Variables",s={unversionedId:"templates/template-variables",id:"templates/template-variables",title:"Template Variables",description:"[API Docs]",source:"@site/docs/templates/template-variables.md",sourceDirName:"templates",slug:"/templates/template-variables",permalink:"/docs/templates/template-variables",editUrl:"https://github.com/epilot-dev/docs/edit/main/docs/templates/template-variables.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"appsSidebar",previous:{title:"Single Sign On",permalink:"/docs/sso/single-sign-on"},next:{title:"Blueprints",permalink:"/docs/blueprints/intro"}},d=[{value:"Template Variables API",id:"template-variables-api",children:[],level:2},{value:"Variable Picker",id:"variable-picker",children:[],level:2},{value:"Variable Builder",id:"variable-builder",children:[{value:"Custom Variables",id:"custom-variables",children:[],level:3},{value:"Order Table Variable",id:"order-table-variable",children:[],level:3}],level:2},{value:"Custom Handlebars Helpers",id:"custom-handlebars-helpers",children:[{value:"Standard Handlebars Helpers",id:"standard-handlebars-helpers",children:[],level:3},{value:"formatAddress",id:"formataddress",children:[],level:3},{value:"calculateColspan",id:"calculatecolspan",children:[],level:3},{value:"calculatePeriodColspan",id:"calculateperiodcolspan",children:[],level:3},{value:"calculateSummaryColspan",id:"calculatesummarycolspan",children:[],level:3},{value:"isColumnEnabled",id:"iscolumnenabled",children:[],level:3},{value:"shouldDisplayDetails",id:"shoulddisplaydetails",children:[],level:3},{value:"isSummaryVisible",id:"issummaryvisible",children:[],level:3},{value:"isExternalFeesMetadataVisible",id:"isexternalfeesmetadatavisible",children:[],level:3},{value:"gt",id:"gt",children:[],level:3},{value:"lt",id:"lt",children:[],level:3},{value:"eq",id:"eq",children:[],level:3},{value:"blockHelperMissing",id:"blockhelpermissing",children:[],level:3},{value:"helperMissing",id:"helpermissing",children:[],level:3},{value:"makeStyle",id:"makestyle",children:[],level:3},{value:"<code>&lt;schema&gt;.&lt;property&gt;</code>",id:"schemaproperty",children:[],level:3},{value:"email",id:"email",children:[],level:3},{value:"billing_email",id:"billing_email",children:[],level:3},{value:"phone",id:"phone",children:[],level:3},{value:"billing_phone",id:"billing_phone",children:[],level:3},{value:"address",id:"address",children:[],level:3},{value:"billing_address",id:"billing_address",children:[],level:3},{value:"shipping_address",id:"shipping_address",children:[],level:3},{value:"delivery_address",id:"delivery_address",children:[],level:3},{value:"additional_address",id:"additional_address",children:[],level:3},{value:"withTag",id:"withtag",children:[],level:3},{value:"yn",id:"yn",children:[],level:3},{value:"xif",id:"xif",children:[],level:3},{value:"customOrderTableVariable",id:"customordertablevariable",children:[],level:3},{value:"formatDateTime",id:"formatdatetime",children:[],level:3},{value:"formatDate",id:"formatdate",children:[],level:3},{value:"dateMath",id:"datemath",children:[],level:3},{value:"padStart",id:"padstart",children:[],level:3},{value:"generateJourneyLink",id:"generatejourneylink",children:[],level:3},{value:"asCurrency",id:"ascurrency",children:[],level:3}],level:2}],o={toc:d},p="wrapper";function m(e){let{components:a,...r}=e;return(0,l.kt)(p,(0,n.Z)({},o,r,{components:a,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"template-variables"},"Template Variables"),(0,l.kt)("p",null,"[",(0,l.kt)("a",{parentName:"p",href:"/api/template-variables"},"API Docs"),"]\n[",(0,l.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@epilot/template-variables-client"},"SDK"),"]"),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"This article is missing content (TODO)"))),(0,l.kt)("p",null,"The Template Variables API provides variable discovery and substitution email and document templates using ",(0,l.kt)("a",{parentName:"p",href:"https://handlebarsjs.com/"},"Handlebars"),"."),(0,l.kt)("h2",{id:"template-variables-api"},"Template Variables API"),(0,l.kt)("p",null,"This API is called to both discover available variables as well as execute the variable substitution using handlebars."),(0,l.kt)("p",null,"Each time an email or document template is used, the Template Variable API is called with the appropriate standardised parameters."),(0,l.kt)("p",null,"The Template Variable API uses the Entity API and others to fetch the correct values for each variable when compiling the template."),(0,l.kt)("h2",{id:"variable-picker"},"Variable Picker"),(0,l.kt)("p",null,"We provide a picker UI for users to search and explore available variables."),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Variable Picker UI",src:t(72701).Z,width:"470",height:"689"})),(0,l.kt)("h2",{id:"variable-builder"},"Variable Builder"),(0,l.kt)("p",null,"Custom variables can be created using the Variable Builder under Configuration > Templates > Variable Builder, or by going directly to ",(0,l.kt)("a",{parentName:"p",href:"https://portal.epilot.cloud/app/variable-builder"},"https://portal.epilot.cloud/app/variable-builder")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Variable Builder UI",src:t(17095).Z,width:"1808",height:"920"})),(0,l.kt)("p",null,"You can create the following types of variables:"),(0,l.kt)("h3",{id:"custom-variables"},"Custom Variables"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Custom Variables",src:t(84473).Z,width:"1806",height:"921"})),(0,l.kt)("p",null,"Custom variables can be composed of any text, and, make use of any of the ",(0,l.kt)("a",{parentName:"p",href:"#custom-handlebars-helpers"},"Handlebars Helpers"),"."),(0,l.kt)("p",null,"To use a custom variable on your document template, use this syntax:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},"{{custom_variable_name}}\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Note:")," The handlebars helpers can be directly used on document templates. Custom variables are helpful to contain and reuse complex logics or data."),(0,l.kt)("h3",{id:"order-table-variable"},"Order Table Variable"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Order Table Variable",src:t(24602).Z,width:"1806",height:"918"})),(0,l.kt)("p",null,"Order tables are used to display a table of items of a given ",(0,l.kt)("a",{parentName:"p",href:"https://docs.epilot.io/docs/pricing/orders"},"Order"),"."),(0,l.kt)("p",null,"They are extremely customizable and can also make use of ",(0,l.kt)("a",{parentName:"p",href:"#custom-variables"},"Custom Variables")," or ",(0,l.kt)("a",{parentName:"p",href:"#custom-handlebars-helpers"},"Handlebars Helpers"),"."),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Order Table Column Config",src:t(23262).Z,width:"603",height:"856"}),"\n",(0,l.kt)("img",{alt:"Order Table Column Config 2",src:t(57286).Z,width:"602",height:"856"})),(0,l.kt)("p",null,"For example, customizing it's columns order, style, removing or adding columns, etc."),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Order Table Column Config 3",src:t(12347).Z,width:"1104",height:"857"})),(0,l.kt)("p",null,"Or even completely changing how the table should be rendered, adding a custom header, footer, etc."),(0,l.kt)("p",null,"To use a custom order table variable on your document template, use this syntax:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},"{{~~custom_table_key}}\n")),(0,l.kt)("h2",{id:"custom-handlebars-helpers"},"Custom Handlebars Helpers"),(0,l.kt)("p",null,"These are handlebars helpers you can use to further customize your templates."),(0,l.kt)("h3",{id:"standard-handlebars-helpers"},"Standard Handlebars Helpers"),(0,l.kt)("p",null,"Registers utility helpers from the ",(0,l.kt)("inlineCode",{parentName:"p"},"handlebars-helpers")," library for categories like ",(0,l.kt)("inlineCode",{parentName:"p"},"math"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"number"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"date"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"comparison"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"match"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"array"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"regex"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"collection"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"object"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"string"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"html"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"markdown"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"url"),", and ",(0,l.kt)("inlineCode",{parentName:"p"},"moment"),". Examples include arithmetic operations (",(0,l.kt)("inlineCode",{parentName:"p"},"{{add 1 2}}")," \u2192 ",(0,l.kt)("inlineCode",{parentName:"p"},"3"),"), number formatting (",(0,l.kt)("inlineCode",{parentName:"p"},"{{formatNumber 1000}}"),"), date manipulation, conditional logic (",(0,l.kt)("inlineCode",{parentName:"p"},"{{ifEq a b}}"),"), array operations (",(0,l.kt)("inlineCode",{parentName:"p"},"{{first arr}}"),"), and string manipulation (",(0,l.kt)("inlineCode",{parentName:"p"},"{{uppercase str}}"),")."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},"{{add 1 2}}\n")),(0,l.kt)("h3",{id:"formataddress"},"formatAddress"),(0,l.kt)("p",null,"This helper formats an address object into a string using ",(0,l.kt)("inlineCode",{parentName:"p"},"buildFullAddress"),". Returns an empty string if the input is not a valid address object."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},"{{formatAddress 'billing_address.0'}}\n")),(0,l.kt)("h3",{id:"calculatecolspan"},"calculateColspan"),(0,l.kt)("p",null,"Calculates the colspan for table cells based on the table configuration. Starts with the total number of columns minus 3, adjusts for disabled columns, the presence of an ",(0,l.kt)("inlineCode",{parentName:"p"},"amount_tax")," column, and whether ",(0,l.kt)("inlineCode",{parentName:"p"},"net_total")," is enabled in the footer. Ensures the result is non-negative. Used on ",(0,l.kt)("a",{parentName:"p",href:"#order-table-variable"},"Order Table Variables"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},"{{calculateColspan table_config}}\n")),(0,l.kt)("h3",{id:"calculateperiodcolspan"},"calculatePeriodColspan"),(0,l.kt)("p",null,"Determines the colspan for period-related table columns. Returns 2 if there are more than 3 enabled columns, 1 if exactly 3 enabled columns and ",(0,l.kt)("inlineCode",{parentName:"p"},"net_total")," is enabled in the footer, or 1 for fewer than 3 enabled columns. Used on ",(0,l.kt)("a",{parentName:"p",href:"#order-table-variable"},"Order Table Variables"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},"{{calculatePeriodColspan table_config}}\n")),(0,l.kt)("h3",{id:"calculatesummarycolspan"},"calculateSummaryColspan"),(0,l.kt)("p",null,"Calculates the colspan for summary sections by counting the number of enabled and draggable columns in the table header. Returns 0 if no columns are defined. Used on ",(0,l.kt)("a",{parentName:"p",href:"#order-table-variable"},"Order Table Variables"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},"{{calculateSummaryColspan table_config}}\n")),(0,l.kt)("h3",{id:"iscolumnenabled"},"isColumnEnabled"),(0,l.kt)("p",null,"Checks if a specific column is enabled in the table configuration by matching the column ID. Returns ",(0,l.kt)("inlineCode",{parentName:"p"},"true")," if the column exists and is enabled, ",(0,l.kt)("inlineCode",{parentName:"p"},"false")," otherwise. Used on ",(0,l.kt)("a",{parentName:"p",href:"#order-table-variable"},"Order Table Variables"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},"{{isColumnEnabled table_config 'price'}}\n")),(0,l.kt)("h3",{id:"shoulddisplaydetails"},"shouldDisplayDetails"),(0,l.kt)("p",null,"Determines if detailed information for a specific column should be displayed based on the ",(0,l.kt)("inlineCode",{parentName:"p"},"showDetails")," property of the column in the table configuration. Returns ",(0,l.kt)("inlineCode",{parentName:"p"},"false")," if the column is not found or ",(0,l.kt)("inlineCode",{parentName:"p"},"showDetails")," is not set. Used on ",(0,l.kt)("a",{parentName:"p",href:"#order-table-variable"},"Order Table Variables"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},"{{shouldDisplayDetails table_config 'description'}}\n")),(0,l.kt)("h3",{id:"issummaryvisible"},"isSummaryVisible"),(0,l.kt)("p",null,"Checks if the summary section is visible by determining if there is at least one enabled column that is not draggable in the table configuration. Used on ",(0,l.kt)("a",{parentName:"p",href:"#order-table-variable"},"Order Table Variables"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},"{{isSummaryVisible table_config}}\n")),(0,l.kt)("h3",{id:"isexternalfeesmetadatavisible"},"isExternalFeesMetadataVisible"),(0,l.kt)("p",null,"Determines if external fees metadata is visible based on the ",(0,l.kt)("inlineCode",{parentName:"p"},"enable")," property of ",(0,l.kt)("inlineCode",{parentName:"p"},"external_fees_metadata")," in the table footer configuration. Used on ",(0,l.kt)("a",{parentName:"p",href:"#order-table-variable"},"Order Table Variables"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},"{{isExternalFeesMetadataVisible table_config}}\n")),(0,l.kt)("h3",{id:"gt"},"gt"),(0,l.kt)("p",null,"Compares two numbers and returns ",(0,l.kt)("inlineCode",{parentName:"p"},"true")," if the first is greater than the second."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},"{{gt 5 3}}\n")),(0,l.kt)("h3",{id:"lt"},"lt"),(0,l.kt)("p",null,"Compares two numbers and returns ",(0,l.kt)("inlineCode",{parentName:"p"},"true")," if the first is less than the second."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},"{{lt 3 5}}\n")),(0,l.kt)("h3",{id:"eq"},"eq"),(0,l.kt)("p",null,"Compares two numbers and returns ",(0,l.kt)("inlineCode",{parentName:"p"},"true")," if they are equal."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},"{{eq 5 5}}\n")),(0,l.kt)("h3",{id:"blockhelpermissing"},"blockHelperMissing"),(0,l.kt)("p",null,"Returns an empty string when a block helper is missing, ensuring no output is rendered."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},"{{#missingBlock}}content{{/missingBlock}}\n")),(0,l.kt)("h3",{id:"helpermissing"},"helperMissing"),(0,l.kt)("p",null,"Returns an empty string when a helper is not found, preventing errors in the template."),(0,l.kt)("h3",{id:"makestyle"},"makeStyle"),(0,l.kt)("p",null,"Converts a table configuration object into a CSS style string by mapping non-object properties to ",(0,l.kt)("inlineCode",{parentName:"p"},"key: value")," pairs, joined with semicolons. Ignores object values and falsy values. Used on ",(0,l.kt)("a",{parentName:"p",href:"#order-table-variable"},"Order Table Variables"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},"{{makeStyle table_config.style}}\n")),(0,l.kt)("h3",{id:"schemaproperty"},(0,l.kt)("inlineCode",{parentName:"h3"},"<schema>.<property>")),(0,l.kt)("p",null,"Dynamically registered based on schema attributes (e.g., ",(0,l.kt)("inlineCode",{parentName:"p"},"main.email"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"contact.name"),'). Retrieves a specific property value from the context data, prioritizing items tagged as "primary" or the first item in an array. If the property is an address identifier (e.g., ',(0,l.kt)("inlineCode",{parentName:"p"},"street"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"city"),"), it formats it as a full address using ",(0,l.kt)("inlineCode",{parentName:"p"},"buildFullAddress"),". Supports nested attributes for repeatable or relational schemas."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},"{{main.email}}\n")),(0,l.kt)("h3",{id:"email"},"email"),(0,l.kt)("p",null,"Retrieves email data from the context, prioritizing ",(0,l.kt)("inlineCode",{parentName:"p"},"email")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"billing_email")," identifiers. If the data is an array, it takes the first element. Returns the matched value or an empty string if not found."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},'{{email "contact"}}\n')),(0,l.kt)("h3",{id:"billing_email"},"billing_email"),(0,l.kt)("p",null,"Retrieves billing email data from the context, prioritizing ",(0,l.kt)("inlineCode",{parentName:"p"},"billing_email")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"email")," identifiers. If the data is an array, it takes the first element. Returns the matched value or an empty string if not found."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},'{{billing_email "contact"}}\n')),(0,l.kt)("h3",{id:"phone"},"phone"),(0,l.kt)("p",null,"Retrieves phone data from the context, prioritizing ",(0,l.kt)("inlineCode",{parentName:"p"},"phone")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"billing_phone")," identifiers. If the data is an array, it takes the first element. Returns the matched value or an empty string if not found."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},'{{phone "contact"}}\n')),(0,l.kt)("h3",{id:"billing_phone"},"billing_phone"),(0,l.kt)("p",null,"Retrieves billing phone data from the context, prioritizing ",(0,l.kt)("inlineCode",{parentName:"p"},"billing_phone")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"phone")," identifiers. If the data is an array, it takes the first element. Returns the matched value or an empty string if not found."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},'{{billing_phone "contact"}}\n')),(0,l.kt)("h3",{id:"address"},"address"),(0,l.kt)("p",null,"Formats an address from the context data (e.g., ",(0,l.kt)("inlineCode",{parentName:"p"},"this"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"this.order"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"this.contact"),") by searching for addresses with ",(0,l.kt)("inlineCode",{parentName:"p"},"billing")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"primary")," tags. Uses ",(0,l.kt)("inlineCode",{parentName:"p"},"buildFullAddress")," to format the address. Falls back to the first address if no tagged address is found."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},"{{address}}\n")),(0,l.kt)("h3",{id:"billing_address"},"billing_address"),(0,l.kt)("p",null,"Formats an address from the context data by searching for addresses with ",(0,l.kt)("inlineCode",{parentName:"p"},"billing"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"shipping"),", or ",(0,l.kt)("inlineCode",{parentName:"p"},"primary")," tags. Uses ",(0,l.kt)("inlineCode",{parentName:"p"},"buildFullAddress")," to format the address. Falls back to the first address if no tagged address is found."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},"{{billing_address}}\n")),(0,l.kt)("h3",{id:"shipping_address"},"shipping_address"),(0,l.kt)("p",null,"Formats an address from the context data by searching for addresses with ",(0,l.kt)("inlineCode",{parentName:"p"},"shipping"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"billing"),", or ",(0,l.kt)("inlineCode",{parentName:"p"},"primary")," tags. Uses ",(0,l.kt)("inlineCode",{parentName:"p"},"buildFullAddress")," to format the address. Falls back to the first address if no tagged address is found."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},"{{shipping_address}}\n")),(0,l.kt)("h3",{id:"delivery_address"},"delivery_address"),(0,l.kt)("p",null,"Formats an address from the context data by searching for addresses with ",(0,l.kt)("inlineCode",{parentName:"p"},"delivery")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"primary")," tags. Uses ",(0,l.kt)("inlineCode",{parentName:"p"},"buildFullAddress")," to format the address. Falls back to the first delivery address if no tagged address is found."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},"{{delivery_address}}\n")),(0,l.kt)("h3",{id:"additional_address"},"additional_address"),(0,l.kt)("p",null,"Formats an address from the context data by searching for addresses with ",(0,l.kt)("inlineCode",{parentName:"p"},"primary")," tags. Uses ",(0,l.kt)("inlineCode",{parentName:"p"},"buildFullAddress")," to format the address."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},"{{additional_address}}\n")),(0,l.kt)("h3",{id:"withtag"},"withTag"),(0,l.kt)("p",null,"Retrieves a value from an array of items based on a specified tag (defaults to ",(0,l.kt)("inlineCode",{parentName:"p"},"primary"),") and optional attribute. Uses ",(0,l.kt)("inlineCode",{parentName:"p"},"getValueByTag")," to find the matching item and return the attribute value or a formatted address."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},'{{withTag items tag="primary" attribute="email"}}\n')),(0,l.kt)("h3",{id:"yn"},"yn"),(0,l.kt)("p",null,"Converts a boolean-like value (using the ",(0,l.kt)("inlineCode",{parentName:"p"},"yn"),' library) to a translated "Yes" or "No" string (via ',(0,l.kt)("inlineCode",{parentName:"p"},"i18n.t"),"). Optionally returns custom ",(0,l.kt)("inlineCode",{parentName:"p"},"success")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"failure")," values if provided."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},"{{yn true}}\n")),(0,l.kt)("h3",{id:"xif"},"xif"),(0,l.kt)("p",null,'Returns an "x" if the input evaluates to true (via ',(0,l.kt)("inlineCode",{parentName:"p"},"yn"),"), otherwise an empty string."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},"{{xif true}}\n")),(0,l.kt)("h3",{id:"customordertablevariable"},"customOrderTableVariable"),(0,l.kt)("p",null,"Renders a ",(0,l.kt)("a",{parentName:"p",href:"#order-table-variable"},"Order Table Variable"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},"{{~~custom_table_key}}\n")),(0,l.kt)("h3",{id:"formatdatetime"},"formatDateTime"),(0,l.kt)("p",null,"Formats a date/time string using ",(0,l.kt)("inlineCode",{parentName:"p"},"formatDateTimeIfPossible")," with a specified pattern (defaults to ",(0,l.kt)("inlineCode",{parentName:"p"},"JODA_SHORT_DATE_TIME_FORMAT"),")."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},'{{formatDateTime "2025-05-13" "yyyy-MM-dd HH:mm"}}\n')),(0,l.kt)("h3",{id:"formatdate"},"formatDate"),(0,l.kt)("p",null,"Formats a date string using ",(0,l.kt)("inlineCode",{parentName:"p"},"formatDateTimeIfPossible")," with a specified pattern (defaults to ",(0,l.kt)("inlineCode",{parentName:"p"},"JODA_DATE_FORMAT"),")."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},'{{formatDate "2025-05-13" "yyyy-MM-dd"}}\n')),(0,l.kt)("h3",{id:"datemath"},"dateMath"),(0,l.kt)("p",null,"Performs date arithmetic (e.g., adding/subtracting days) using ",(0,l.kt)("inlineCode",{parentName:"p"},"calculateDate"),". Accepts parameters like ",(0,l.kt)("inlineCode",{parentName:"p"},"inputDate"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"expression"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"inputFormat"),", and ",(0,l.kt)("inlineCode",{parentName:"p"},"format"),". Logs errors if processing fails."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},'{{dateMath "2025-05-13" "+1d"}}\n')),(0,l.kt)("h3",{id:"padstart"},"padStart"),(0,l.kt)("p",null,"Pads a string to a target length with a specified pad string (defaults to space) using ",(0,l.kt)("inlineCode",{parentName:"p"},"padStartHelper"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},'{{padStart "5" 3 "0"}}\n')),(0,l.kt)("h3",{id:"generatejourneylink"},"generateJourneyLink"),(0,l.kt)("p",null,"Generates a journey link based on provided options using ",(0,l.kt)("inlineCode",{parentName:"p"},"generateJourneyLink"),". Logs errors if processing fails."),(0,l.kt)("p",null,"The helper accepts space separated key-value pairs as arguments (example: param1=value1), which end up in options.hash"),(0,l.kt)("p",null,"It requires journey_id to be passed as a parameter and can have the following manually parsed parameters:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"custom_url: Custom domain to be used in the URL"),(0,l.kt)("li",{parentName:"ul"},"expires_in: Expiration time of the token (",(0,l.kt)("a",{parentName:"li",href:"https://github.com/vercel/ms"},"ms"),")"),(0,l.kt)("li",{parentName:"ul"},"nonce: Boolean to add a nonce to the payload")),(0,l.kt)("p",null,"The helper will add the initial_submission_id to the payload if it's available in the context"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},'{{generateJourneyLink hash.journeyId="123"}}\n')),(0,l.kt)("h3",{id:"ascurrency"},"asCurrency"),(0,l.kt)("p",null,"Uses ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/epilot-dev/pricing"},"@epilot/pricing")," to format the amount using ",(0,l.kt)("inlineCode",{parentName:"p"},"formatAmount")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"formatAmountFromString"),". Accepts ",(0,l.kt)("inlineCode",{parentName:"p"},"currency")," (defaults to ",(0,l.kt)("inlineCode",{parentName:"p"},"DEFAULT_CURRENCY"),"), ",(0,l.kt)("inlineCode",{parentName:"p"},"locale")," (defaults to ",(0,l.kt)("inlineCode",{parentName:"p"},"de"),"), and ",(0,l.kt)("inlineCode",{parentName:"p"},"displayZeroAmount")," (defaults to ",(0,l.kt)("inlineCode",{parentName:"p"},"false"),"). Returns an empty string for invalid or zero amounts unless ",(0,l.kt)("inlineCode",{parentName:"p"},"displayZeroAmount")," is true."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},'{{asCurrency 100.50 "EUR"}}\n')))}m.isMDXComponent=!0},84473:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/custom-variables-4a044b1269ce1fab85b954ce1ddbd9f0.png"},23262:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/order-table-2-4caf7cde56bb6a85ce179e206952132a.png"},57286:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/order-table-3-4c01a32d2bd50fe2bf52077710db6de8.png"},12347:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/order-table-4-75f579c07fd7a50fa556c1d0fe382781.png"},24602:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/order-table-7c4728745229d6a0da775440cbf45312.png"},17095:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/variable-builder-117242496a34b973256c968529c048a4.png"},72701:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/variable-picker-51d8c14b051c1abacac1f99431fb258d.png"}}]);