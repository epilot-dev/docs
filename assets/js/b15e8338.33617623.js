"use strict";(self.webpackChunkepilot_dev_handbook=self.webpackChunkepilot_dev_handbook||[]).push([[54700],{35722:(e,t,n)=>{n.d(t,{G:()=>d});var i=n(42858),a=n(67294),r=n(25108);let s=0,l=!1;const o=(e,t)=>{const n=e?.getAttribute("data-theme")??"light",i="dark"===n?"dark":"default";return t?.theme?.[n]??t?.mermaid?.theme??i},d=e=>{let{chart:t,config:n}=e;const d=(0,a.useRef)(null),u=(0,a.useRef)("mermaid-"+s++),[p,c]=(0,a.useState)(""),m=(0,a.useMemo)((()=>"string"==typeof n?JSON.parse(n):n),[n]);return(0,a.useEffect)((()=>{if("undefined"==typeof window)return;const e=document.querySelector("html"),n=o(e,m);l||(i.Z.initialize({startOnLoad:!1,theme:n,...m?.mermaid||{}}),l=!0);(async()=>{try{const{svg:e}=await i.Z.render(u.current,t);c(e)}catch(e){r.error("Mermaid rendering failed:",e)}})()}),[t,m]),(0,a.useEffect)((()=>{if("undefined"==typeof window)return;const e=document.querySelector("html"),n=new MutationObserver((n=>{for(const a of n){if("attributes"!==a.type||"data-theme"!==a.attributeName)continue;const n=o(e,m);l=!1,i.Z.initialize({startOnLoad:!1,theme:n,...m?.mermaid||{}}),l=!0,u.current="mermaid-"+s++,i.Z.render(u.current,t).then((e=>{let{svg:t}=e;c(t)}));break}}));return n.observe(e,{attributes:!0}),()=>n.disconnect()}),[t,m]),"undefined"==typeof window?a.createElement("div",{className:"mermaid"},t):a.createElement("div",{ref:d,dangerouslySetInnerHTML:{__html:p}})}},51642:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>s,default:()=>p,frontMatter:()=>r,metadata:()=>l,toc:()=>o});var i=n(87462),a=(n(67294),n(3905));n(35722);const r={sidebar_position:6,title:"Examples",description:"Complete integration examples for common use cases"},s="Integration Examples",l={unversionedId:"integrations/erp-toolkit/inbound/examples",id:"integrations/erp-toolkit/inbound/examples",title:"Examples",description:"Complete integration examples for common use cases",source:"@site/docs/integrations/erp-toolkit/inbound/examples.md",sourceDirName:"integrations/erp-toolkit/inbound",slug:"/integrations/erp-toolkit/inbound/examples",permalink:"/docs/integrations/erp-toolkit/inbound/examples",editUrl:"https://github.com/epilot-dev/docs/edit/main/docs/integrations/erp-toolkit/inbound/examples.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6,title:"Examples",description:"Complete integration examples for common use cases"},sidebar:"docsSidebar",previous:{title:"Meter Readings",permalink:"/docs/integrations/erp-toolkit/inbound/meter-readings"},next:{title:"Configuration",permalink:"/docs/integrations/erp-toolkit/configuration"}},o=[{value:"Example 1: Customer Master Data Sync",id:"example-1-customer-master-data-sync",children:[{value:"Use Case",id:"use-case",children:[],level:3},{value:"Input Payload",id:"input-payload",children:[],level:3},{value:"Mapping Configuration",id:"mapping-configuration",children:[],level:3},{value:"API Request",id:"api-request",children:[],level:3}],level:2},{value:"Example 2: Contract with Related Entities",id:"example-2-contract-with-related-entities",children:[{value:"Use Case",id:"use-case-1",children:[],level:3},{value:"Input Payload",id:"input-payload-1",children:[],level:3},{value:"Mapping Configuration",id:"mapping-configuration-1",children:[],level:3}],level:2},{value:"Example 3: Bulk Meter Readings Import",id:"example-3-bulk-meter-readings-import",children:[{value:"Use Case",id:"use-case-2",children:[],level:3},{value:"Input Payload",id:"input-payload-2",children:[],level:3},{value:"Mapping Configuration",id:"mapping-configuration-2",children:[],level:3}],level:2},{value:"Example 4: Complex Business Partner with Multiple Addresses",id:"example-4-complex-business-partner-with-multiple-addresses",children:[{value:"Use Case",id:"use-case-3",children:[],level:3},{value:"Input Payload",id:"input-payload-3",children:[],level:3},{value:"Mapping Configuration",id:"mapping-configuration-3",children:[],level:3}],level:2},{value:"Example 5: Conditional Processing",id:"example-5-conditional-processing",children:[{value:"Use Case",id:"use-case-4",children:[],level:3},{value:"Input Payload (Individual)",id:"input-payload-individual",children:[],level:3},{value:"Input Payload (Business)",id:"input-payload-business",children:[],level:3},{value:"Mapping Configuration",id:"mapping-configuration-4",children:[],level:3}],level:2},{value:"Testing with Mapping Simulation",id:"testing-with-mapping-simulation",children:[],level:2}],d={toc:o},u="wrapper";function p(e){let{components:t,...n}=e;return(0,a.kt)(u,(0,i.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"integration-examples"},"Integration Examples"),(0,a.kt)("p",null,"Complete, working examples for common ERP integration scenarios."),(0,a.kt)("h2",{id:"example-1-customer-master-data-sync"},"Example 1: Customer Master Data Sync"),(0,a.kt)("p",null,"Synchronize customer data from an ERP system into epilot contacts."),(0,a.kt)("h3",{id:"use-case"},"Use Case"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Sync customer profiles from SAP"),(0,a.kt)("li",{parentName:"ul"},"Create or update contact entities"),(0,a.kt)("li",{parentName:"ul"},"Handle email and phone as repeatable fields"),(0,a.kt)("li",{parentName:"ul"},"Link to existing accounts")),(0,a.kt)("h3",{id:"input-payload"},"Input Payload"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "customerId": "C-10042",\n  "salutation": "Mr",\n  "firstName": "John",\n  "lastName": "Doe",\n  "email": "john.doe@example.com",\n  "phone": "+49 123 456789",\n  "dateOfBirth": "1985-03-15",\n  "address": {\n    "street": "Hauptstra\xdfe 42",\n    "zip": "50667",\n    "city": "K\xf6ln",\n    "country": "DE"\n  },\n  "accountId": "ACC-5001",\n  "status": "active"\n}\n')),(0,a.kt)("h3",{id:"mapping-configuration"},"Mapping Configuration"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "entities": [\n    {\n      "entity_schema": "contact",\n      "unique_ids": ["customer_number"],\n      "fields": [\n        { "attribute": "customer_number", "field": "customerId" },\n        { "attribute": "salutation", "field": "salutation" },\n        { "attribute": "first_name", "field": "firstName" },\n        { "attribute": "last_name", "field": "lastName" },\n        { "attribute": "email", "field": "email", "_type": "email" },\n        { "attribute": "phone", "field": "phone", "_type": "phone" },\n        { "attribute": "birthdate", "field": "dateOfBirth" },\n        { "attribute": "address_street", "field": "$.address.street" },\n        { "attribute": "address_zip", "field": "$.address.zip" },\n        { "attribute": "address_city", "field": "$.address.city" },\n        { "attribute": "address_country", "field": "$.address.country" },\n        {\n          "attribute": "full_address",\n          "jsonataExpression": "address.street & \', \' & address.zip & \' \' & address.city"\n        },\n        { "attribute": "source", "constant": "SAP" },\n        {\n          "attribute": "account",\n          "relation": {\n            "entity_schema": "account",\n            "unique_ids": ["account_number"],\n            "source_field": "accountId",\n            "enabled": "$exists(accountId)"\n          }\n        }\n      ]\n    }\n  ]\n}\n')),(0,a.kt)("h3",{id:"api-request"},"API Request"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'curl -X POST \'https://erp-integration.sls.epilot.io/v3/erp/updates/events\' \\\n  -H \'Authorization: Bearer <token>\' \\\n  -H \'Content-Type: application/json\' \\\n  -d \'{\n    "integration_id": "<integration-id>",\n    "meta": { "correlation_id": "customer-sync-001" },\n    "events": [{\n      "event_type": "UPDATE",\n      "object_type": "customer",\n      "timestamp": "2024-01-15T10:00:00Z",\n      "format": "json",\n      "payload": "{\\"customerId\\":\\"C-10042\\",\\"salutation\\":\\"Mr\\",\\"firstName\\":\\"John\\",\\"lastName\\":\\"Doe\\",\\"email\\":\\"john.doe@example.com\\",\\"phone\\":\\"+49 123 456789\\",\\"dateOfBirth\\":\\"1985-03-15\\",\\"address\\":{\\"street\\":\\"Hauptstra\xdfe 42\\",\\"zip\\":\\"50667\\",\\"city\\":\\"K\xf6ln\\",\\"country\\":\\"DE\\"},\\"accountId\\":\\"ACC-5001\\",\\"status\\":\\"active\\"}",\n      "deduplication_id": "customer-C-10042-v1"\n    }]\n  }\'\n')),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"example-2-contract-with-related-entities"},"Example 2: Contract with Related Entities"),(0,a.kt)("p",null,"Synchronize contracts that link to customers and include nested meter data."),(0,a.kt)("h3",{id:"use-case-1"},"Use Case"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Create or update contract entities"),(0,a.kt)("li",{parentName:"ul"},"Link to existing customer contact"),(0,a.kt)("li",{parentName:"ul"},"Create meters from nested array"),(0,a.kt)("li",{parentName:"ul"},"Establish contract-meter relationships")),(0,a.kt)("h3",{id:"input-payload-1"},"Input Payload"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "contractId": "CTR-2024-0001",\n  "customerId": "C-10042",\n  "contractType": "electricity",\n  "startDate": "2024-02-01",\n  "endDate": "2025-01-31",\n  "status": "active",\n  "tariff": {\n    "name": "Basic Power",\n    "pricePerKwh": 0.32\n  },\n  "meters": [\n    {\n      "meterId": "M-001234",\n      "type": "electricity",\n      "location": "Basement",\n      "initialReading": 10000\n    },\n    {\n      "meterId": "M-001235",\n      "type": "electricity",\n      "location": "Garage",\n      "initialReading": 500\n    }\n  ]\n}\n')),(0,a.kt)("h3",{id:"mapping-configuration-1"},"Mapping Configuration"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "entities": [\n    {\n      "entity_schema": "meter",\n      "jsonataExpression": "meters",\n      "unique_ids": ["meter_number"],\n      "fields": [\n        { "attribute": "meter_number", "field": "meterId" },\n        { "attribute": "type", "field": "type" },\n        { "attribute": "location", "field": "location" },\n        { "attribute": "initial_reading", "field": "initialReading" }\n      ]\n    },\n    {\n      "entity_schema": "contract",\n      "unique_ids": ["contract_number"],\n      "fields": [\n        { "attribute": "contract_number", "field": "contractId" },\n        { "attribute": "contract_type", "field": "contractType" },\n        { "attribute": "start_date", "field": "startDate" },\n        { "attribute": "end_date", "field": "endDate" },\n        { "attribute": "status", "field": "status" },\n        { "attribute": "tariff_name", "field": "$.tariff.name" },\n        { "attribute": "price_per_kwh", "field": "$.tariff.pricePerKwh" },\n        { "attribute": "source", "constant": "ERP" },\n        {\n          "attribute": "customer",\n          "relation": {\n            "entity_schema": "contact",\n            "unique_ids": ["customer_number"],\n            "source_field": "customerId"\n          }\n        },\n        {\n          "attribute": "meters",\n          "relation": {\n            "entity_schema": "meter",\n            "unique_ids": ["meter_number"],\n            "source_field": "meters.meterId",\n            "operation": "_set"\n          }\n        }\n      ]\n    }\n  ]\n}\n')),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"example-3-bulk-meter-readings-import"},"Example 3: Bulk Meter Readings Import"),(0,a.kt)("p",null,"Import a batch of meter readings from a scheduled ERP export."),(0,a.kt)("h3",{id:"use-case-2"},"Use Case"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Process bulk meter reading data"),(0,a.kt)("li",{parentName:"ul"},"Link readings to existing meters"),(0,a.kt)("li",{parentName:"ul"},"Calculate consumption values"),(0,a.kt)("li",{parentName:"ul"},"Track import batch information")),(0,a.kt)("h3",{id:"input-payload-2"},"Input Payload"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "batchId": "READING-BATCH-2024-01-15",\n  "importTimestamp": "2024-01-15T06:00:00Z",\n  "source": "SAP_METER_EXPORT",\n  "readings": [\n    {\n      "meterId": "M-001234",\n      "readingDate": "2024-01-15",\n      "currentValue": 12500.50,\n      "previousValue": 12000.00,\n      "unit": "kWh",\n      "readingType": "scheduled"\n    },\n    {\n      "meterId": "M-001235",\n      "readingDate": "2024-01-15",\n      "currentValue": 750.25,\n      "previousValue": 500.00,\n      "unit": "kWh",\n      "readingType": "scheduled"\n    },\n    {\n      "meterId": "M-002001",\n      "readingDate": "2024-01-15",\n      "currentValue": 1250.00,\n      "previousValue": 1100.00,\n      "unit": "m3",\n      "readingType": "scheduled"\n    }\n  ]\n}\n')),(0,a.kt)("h3",{id:"mapping-configuration-2"},"Mapping Configuration"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "meter_readings": [\n    {\n      "jsonataExpression": "readings",\n      "meter": {\n        "unique_ids": ["meter_number"]\n      },\n      "fields": [\n        { "attribute": "meter_number", "field": "meterId" },\n        { "attribute": "reading_date", "field": "readingDate" },\n        { "attribute": "value", "field": "currentValue" },\n        { "attribute": "previous_value", "field": "previousValue" },\n        { "attribute": "unit", "field": "unit" },\n        { "attribute": "reading_type", "field": "readingType" },\n        {\n          "attribute": "consumption",\n          "jsonataExpression": "currentValue - previousValue"\n        },\n        { "attribute": "batch_id", "field": "$$.batchId" },\n        { "attribute": "import_timestamp", "field": "$$.importTimestamp" },\n        { "attribute": "source", "field": "$$.source" }\n      ]\n    }\n  ]\n}\n')),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"example-4-complex-business-partner-with-multiple-addresses"},"Example 4: Complex Business Partner with Multiple Addresses"),(0,a.kt)("p",null,"Handle business partners with multiple address types."),(0,a.kt)("h3",{id:"use-case-3"},"Use Case"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Sync business accounts with multiple addresses"),(0,a.kt)("li",{parentName:"ul"},"Map billing and shipping addresses separately"),(0,a.kt)("li",{parentName:"ul"},"Handle multiple contact persons")),(0,a.kt)("h3",{id:"input-payload-3"},"Input Payload"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "partnerId": "BP-50001",\n  "companyName": "Mustermann GmbH",\n  "vatId": "DE123456789",\n  "industryCode": "D35",\n  "addresses": {\n    "billing": {\n      "street": "Rechnungsstra\xdfe 1",\n      "zip": "10115",\n      "city": "Berlin",\n      "country": "DE"\n    },\n    "shipping": {\n      "street": "Lieferweg 42",\n      "zip": "10117",\n      "city": "Berlin",\n      "country": "DE"\n    }\n  },\n  "contacts": [\n    {\n      "contactId": "CON-001",\n      "firstName": "Hans",\n      "lastName": "Schmidt",\n      "role": "CEO",\n      "email": "h.schmidt@mustermann.de"\n    },\n    {\n      "contactId": "CON-002",\n      "firstName": "Anna",\n      "lastName": "M\xfcller",\n      "role": "CFO",\n      "email": "a.mueller@mustermann.de"\n    }\n  ]\n}\n')),(0,a.kt)("h3",{id:"mapping-configuration-3"},"Mapping Configuration"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "entities": [\n    {\n      "entity_schema": "contact",\n      "jsonataExpression": "contacts",\n      "unique_ids": ["contact_number"],\n      "fields": [\n        { "attribute": "contact_number", "field": "contactId" },\n        { "attribute": "first_name", "field": "firstName" },\n        { "attribute": "last_name", "field": "lastName" },\n        { "attribute": "role", "field": "role" },\n        { "attribute": "email", "field": "email", "_type": "email" },\n        { "attribute": "source", "constant": "ERP_PARTNER" }\n      ]\n    },\n    {\n      "entity_schema": "account",\n      "unique_ids": ["partner_number"],\n      "fields": [\n        { "attribute": "partner_number", "field": "partnerId" },\n        { "attribute": "name", "field": "companyName" },\n        { "attribute": "vat_id", "field": "vatId" },\n        { "attribute": "industry_code", "field": "industryCode" },\n        { "attribute": "billing_street", "field": "$.addresses.billing.street" },\n        { "attribute": "billing_zip", "field": "$.addresses.billing.zip" },\n        { "attribute": "billing_city", "field": "$.addresses.billing.city" },\n        { "attribute": "billing_country", "field": "$.addresses.billing.country" },\n        {\n          "attribute": "billing_address",\n          "jsonataExpression": "addresses.billing.street & \', \' & addresses.billing.zip & \' \' & addresses.billing.city"\n        },\n        { "attribute": "shipping_street", "field": "$.addresses.shipping.street" },\n        { "attribute": "shipping_zip", "field": "$.addresses.shipping.zip" },\n        { "attribute": "shipping_city", "field": "$.addresses.shipping.city" },\n        { "attribute": "shipping_country", "field": "$.addresses.shipping.country" },\n        {\n          "attribute": "shipping_address",\n          "jsonataExpression": "addresses.shipping.street & \', \' & addresses.shipping.zip & \' \' & addresses.shipping.city"\n        },\n        {\n          "attribute": "contacts",\n          "relation": {\n            "entity_schema": "contact",\n            "unique_ids": ["contact_number"],\n            "source_field": "contacts.contactId",\n            "operation": "_set"\n          }\n        }\n      ]\n    }\n  ]\n}\n')),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"example-5-conditional-processing"},"Example 5: Conditional Processing"),(0,a.kt)("p",null,"Handle different entity types based on payload conditions."),(0,a.kt)("h3",{id:"use-case-4"},"Use Case"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Different mapping for individual vs. business customers"),(0,a.kt)("li",{parentName:"ul"},"Conditional field processing"),(0,a.kt)("li",{parentName:"ul"},"Skip entities when conditions not met")),(0,a.kt)("h3",{id:"input-payload-individual"},"Input Payload (Individual)"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "customerId": "C-10043",\n  "customerType": "individual",\n  "firstName": "Maria",\n  "lastName": "Weber",\n  "email": "m.weber@email.de"\n}\n')),(0,a.kt)("h3",{id:"input-payload-business"},"Input Payload (Business)"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "customerId": "C-10044",\n  "customerType": "business",\n  "companyName": "Weber Industries",\n  "vatId": "DE987654321",\n  "email": "info@weber-industries.de"\n}\n')),(0,a.kt)("h3",{id:"mapping-configuration-4"},"Mapping Configuration"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "entities": [\n    {\n      "entity_schema": "contact",\n      "unique_ids": ["customer_number"],\n      "enabled": "customerType = \'individual\'",\n      "fields": [\n        { "attribute": "customer_number", "field": "customerId" },\n        { "attribute": "first_name", "field": "firstName" },\n        { "attribute": "last_name", "field": "lastName" },\n        { "attribute": "email", "field": "email", "_type": "email" },\n        { "attribute": "customer_type", "constant": "individual" }\n      ]\n    },\n    {\n      "entity_schema": "account",\n      "unique_ids": ["customer_number"],\n      "enabled": "customerType = \'business\'",\n      "fields": [\n        { "attribute": "customer_number", "field": "customerId" },\n        { "attribute": "name", "field": "companyName" },\n        { "attribute": "vat_id", "field": "vatId" },\n        { "attribute": "email", "field": "email", "_type": "email" },\n        { "attribute": "customer_type", "constant": "business" }\n      ]\n    }\n  ]\n}\n')),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"testing-with-mapping-simulation"},"Testing with Mapping Simulation"),(0,a.kt)("p",null,"Before deploying your mapping, test it using the simulation endpoint:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'curl -X POST \'https://erp-integration.sls.epilot.io/v2/erp/updates/mapping_simulation\' \\\n  -H \'Authorization: Bearer <token>\' \\\n  -H \'Content-Type: application/json\' \\\n  -d \'{\n    "integration_id": "<integration-id>",\n    "event": {\n      "event_type": "UPDATE",\n      "object_type": "customer",\n      "format": "json",\n      "payload": "{\\"customerId\\":\\"C-10042\\",\\"firstName\\":\\"John\\",\\"lastName\\":\\"Doe\\"}"\n    }\n  }\'\n')),(0,a.kt)("p",null,"The simulation returns transformed entity data without persisting anything, so you can verify mappings before production use."))}p.isMDXComponent=!0}}]);