"use strict";(self.webpackChunkepilot_dev_handbook=self.webpackChunkepilot_dev_handbook||[]).push([[46233],{35722:(e,t,a)=>{a.d(t,{G:()=>p});var n=a(42858),r=a(67294),i=a(25108);let o=0,l=!1;const s=(e,t)=>{const a=e?.getAttribute("data-theme")??"light",n="dark"===a?"dark":"default";return t?.theme?.[a]??t?.mermaid?.theme??n},p=e=>{let{chart:t,config:a}=e;const p=(0,r.useRef)(null),c=(0,r.useRef)("mermaid-"+o++),[d,m]=(0,r.useState)(""),u=(0,r.useMemo)((()=>"string"==typeof a?JSON.parse(a):a),[a]);return(0,r.useEffect)((()=>{if("undefined"==typeof window)return;const e=document.querySelector("html"),a=s(e,u);l||(n.Z.initialize({startOnLoad:!1,theme:a,...u?.mermaid||{}}),l=!0);(async()=>{try{const{svg:e}=await n.Z.render(c.current,t);m(e)}catch(e){i.error("Mermaid rendering failed:",e)}})()}),[t,u]),(0,r.useEffect)((()=>{if("undefined"==typeof window)return;const e=document.querySelector("html"),a=new MutationObserver((a=>{for(const r of a){if("attributes"!==r.type||"data-theme"!==r.attributeName)continue;const a=s(e,u);l=!1,n.Z.initialize({startOnLoad:!1,theme:a,...u?.mermaid||{}}),l=!0,c.current="mermaid-"+o++,n.Z.render(c.current,t).then((e=>{let{svg:t}=e;m(t)}));break}}));return a.observe(e,{attributes:!0}),()=>a.disconnect()}),[t,u]),"undefined"==typeof window?r.createElement("div",{className:"mermaid"},t):r.createElement("div",{ref:p,dangerouslySetInnerHTML:{__html:d}})}},38035:(e,t,a)=>{a.r(t),a.d(t,{contentTitle:()=>l,default:()=>m,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var n=a(87462),r=(a(67294),a(3905)),i=a(35722);const o={sidebar_position:2},l="Architecture",s={unversionedId:"portals/architecture",id:"portals/architecture",title:"Architecture",description:"[API Docs]",source:"@site/docs/portals/architecture.md",sourceDirName:"portals",slug:"/portals/architecture",permalink:"/docs/portals/architecture",editUrl:"https://github.com/epilot-dev/docs/edit/main/docs/portals/architecture.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"docsSidebar",previous:{title:"Overview",permalink:"/docs/portals/customer-portal"},next:{title:"Metering",permalink:"/docs/portals/metering"}},p=[{value:"Front End",id:"front-end",children:[{value:"Per Portal",id:"per-portal",children:[],level:3},{value:"Shared",id:"shared",children:[],level:3}],level:2},{value:"Backend",id:"backend",children:[{value:"Shared",id:"shared-1",children:[],level:3},{value:"Interface Towards the Rest of the Platform",id:"interface-towards-the-rest-of-the-platform",children:[],level:3}],level:2},{value:"Flow &amp; Separation",id:"flow--separation",children:[],level:2},{value:"Security &amp; Compliance",id:"security--compliance",children:[{value:"Identity &amp; Access Management",id:"identity--access-management",children:[],level:3},{value:"Data Security",id:"data-security",children:[],level:3},{value:"Network Security",id:"network-security",children:[],level:3},{value:"Monitoring &amp; Logging",id:"monitoring--logging",children:[],level:3},{value:"Compliance Alignment",id:"compliance-alignment",children:[],level:3}],level:2}],c={toc:p},d="wrapper";function m(e){let{components:t,...o}=e;return(0,r.kt)(d,(0,n.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"architecture"},"Architecture"),(0,r.kt)("p",null,"[",(0,r.kt)("a",{parentName:"p",href:"/api/customer-portal"},"API Docs"),"]\n[",(0,r.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@epilot/customer-portal-client"},"SDK"),"]"),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},"multi-tenant, white-label Portals solution")," provides customers with per-portal ",(0,r.kt)("strong",{parentName:"p"},"domain and authentication"),", while sharing a ",(0,r.kt)("strong",{parentName:"p"},"scalable, serverless backend")," built on AWS primitives."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Doc Downloaded Webhook",src:a(43418).Z,width:"2299",height:"1739"})),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"front-end"},"Front End"),(0,r.kt)("p",null,"Portals use React with Radix UI (accessible, themeable components) and TanStack Query (data fetching).\nThe content below focuses on the infrastructure."),(0,r.kt)("h3",{id:"per-portal"},"Per Portal"),(0,r.kt)("p",null,"While Portals can utilize an epilot-branded subdomain like ",(0,r.kt)("inlineCode",{parentName:"p"},"some-portal.ecp.epilot.io"),", production Portals typically use a custom domain. For example, customers owning ",(0,r.kt)("inlineCode",{parentName:"p"},"customer.de")," often choose to use a subdomain like ",(0,r.kt)("inlineCode",{parentName:"p"},"some-portal.customer.de"),". Therefore, each Portal involves high-level the following components:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Amazon CloudFront Distribution"),(0,r.kt)("br",{parentName:"p"}),"\n","Provides performant content delivery and caching for each portal.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Amazon Cognito User Pool"),(0,r.kt)("br",{parentName:"p"}),"\n","Handles authentication and user management per portal.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Amazon Route 53 (Custom Domain)"),(0,r.kt)("br",{parentName:"p"}),"\n","Enables each portal to be accessed via its own custom domain."))),(0,r.kt)("p",null,"Custom domain set up involves pointing CNAME records to AWS for domain ownership verification (Route 53) and actual reverse proxying (CloudFront)."),(0,r.kt)("h3",{id:"shared"},"Shared"),(0,r.kt)("p",null,"For easier maintenance and scalability, the rest of the architecture is shared."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Amazon S3"),(0,r.kt)("br",{parentName:"p"}),"\n","Stores static assets of the Single Page Application (HTML, CSS, JS, images) delivered via CloudFront.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"AWS Lambda@Edge"),(0,r.kt)("br",{parentName:"p"}),"\n","Works with CloudFront for request/response manipulation (primarily URL rewrites)."))),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"backend"},"Backend"),(0,r.kt)("p",null,"Portals backend follows the same principles as any other part of epilot's ",(0,r.kt)("a",{parentName:"p",href:"/docs/architecture/serverless"},"serverless"),", ",(0,r.kt)("a",{parentName:"p",href:"/docs/architecture/api-first"},"API-first")," ",(0,r.kt)("a",{parentName:"p",href:"/docs/architecture/overview"},"architecture"),"."),(0,r.kt)("h3",{id:"shared-1"},"Shared"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Amazon API Gateway"),(0,r.kt)("br",{parentName:"p"}),"\n","Managed API layer for communication with the backend services.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"AWS Lambda"),(0,r.kt)("br",{parentName:"p"}),"\n","Executes backend business logic serverlessly.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Amazon DynamoDB"),(0,r.kt)("br",{parentName:"p"}),"\n","Provides a serverless NoSQL database for portal configuration.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Amazon SQS"),(0,r.kt)("br",{parentName:"p"}),"\n","Enables decoupling and asynchronous processing of events between backend components."))),(0,r.kt)("h3",{id:"interface-towards-the-rest-of-the-platform"},"Interface Towards the Rest of the Platform"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Amazon EventBridge"),(0,r.kt)("br",{parentName:"p"}),"\n","Supports event-driven integration with the wider platform and other AWS services.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"IAM (Lambda Invoke)"),(0,r.kt)("br",{parentName:"p"}),"\n","Grants controlled access for Lambda functions to invoke securely other Lambda functions."))),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"flow--separation"},"Flow & Separation"),(0,r.kt)(i.G,{chart:'graph TB\n    subgraph "Per Portal"\n        CF[CloudFront Distribution]\n        CG[Cognito User Pool]\n        R53[Route 53 Custom Domain]\n    end\n\n    subgraph "Shared Frontend"\n        S3[S3 Static Assets]\n        LE[Lambda@Edge]\n    end\n\n    subgraph "Shared Backend"\n        APIGW[API Gateway]\n        Lambda[AWS Lambda]\n        DDB[DynamoDB]\n        SQS[SQS]\n    end\n\n    subgraph "Platform Integration"\n        EB[EventBridge]\n        IAM[Lambda Invoke via IAM]\n    end\n\n    R53 --\x3e CF\n    CF --\x3e S3\n    CF --\x3e LE\n    CF --\x3e APIGW\n    APIGW --\x3e Lambda\n    Lambda --\x3e DDB\n    Lambda --\x3e SQS\n    Lambda --\x3e EB\n    Lambda --\x3e IAM\n    CG --\x3e APIGW',mdxType:"Mermaid"}),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Each portal has its own ",(0,r.kt)("strong",{parentName:"li"},"CloudFront distribution, Cognito pool, and Route 53 custom domain"),", allowing full branding and identity isolation."),(0,r.kt)("li",{parentName:"ul"},"Shared front end resources (",(0,r.kt)("strong",{parentName:"li"},"S3 and Lambda@Edge"),") support all portals collectively."),(0,r.kt)("li",{parentName:"ul"},"Backend services are centralized (",(0,r.kt)("strong",{parentName:"li"},"API Gateway, Lambda, DynamoDB, SQS"),") to ensure scalability and easier maintenance."),(0,r.kt)("li",{parentName:"ul"},"Portals communicate with the rest of the ",(0,r.kt)("a",{parentName:"li",href:"/docs/architecture/overview"},"platform")," via ",(0,r.kt)("strong",{parentName:"li"},"EventBridge")," and direct ",(0,r.kt)("strong",{parentName:"li"},"Lambda Invoke")," (using ",(0,r.kt)("strong",{parentName:"li"},"IAM"),") for secure integration with the broader ecosystem.")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"security--compliance"},"Security & Compliance"),(0,r.kt)("p",null,"We meet the highest standards in terms of data protection and information security and store data exclusively in Germany.\nFeel free to check our ",(0,r.kt)("a",{parentName:"p",href:"https://www.epilot.cloud/en/ressourcen/it-security"},"overall approach to IT security"),"."),(0,r.kt)("h3",{id:"identity--access-management"},"Identity & Access Management"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Amazon Cognito")," provides per-portal authentication and identity isolation with customizable password policy or MFA requirements."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"AWS IAM")," policies enforce least privilege for Lambda functions."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Lambda Authorizers")," enable secure access to protected backend endpoints.")),(0,r.kt)("h3",{id:"data-security"},"Data Security"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Encryption at rest")," using AWS-managed keys and Secrets Manager."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Encryption in transit")," via HTTPS (TLS 1.2+)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Cognito")," secures user credentials and tokens according to AWS security best practices.")),(0,r.kt)("h3",{id:"network-security"},"Network Security"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"CloudFront + Lambda@Edge")," applies Web Application Firewall (AWS WAF) rules for, e.g., DDoS protection, rate limiting, and bot control."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"CloudFront")," includes rules for geoblocking.")),(0,r.kt)("h3",{id:"monitoring--logging"},"Monitoring & Logging"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Amazon CloudWatch")," for centralized metrics, logs, and alarms (e.g. API calls, Lambda executions, SQS message flows)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"AWS CloudTrail")," for auditing API calls and changes in infrastructure."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Application Performance Monitoring (APM)")," for wider platform observability, alerting, debugging, and optimization.")),(0,r.kt)("h3",{id:"compliance-alignment"},"Compliance Alignment"),(0,r.kt)("p",null,"Portals are aligned with major compliance frameworks:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"GDPR")," \u2013 data minimization, user consent, and right-to-be-forgotten."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"ISO 27001")," \u2013 centralized logging, access controls, and encryption.")))}m.isMDXComponent=!0},43418:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/portals-aws-architecture-60957bfa35e37dd4f014c1126f0255ae.jpg"}}]);