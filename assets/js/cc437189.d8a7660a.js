"use strict";(self.webpackChunkepilot_dev_handbook=self.webpackChunkepilot_dev_handbook||[]).push([[43077],{35722:(e,t,n)=>{n.d(t,{G:()=>d});var a=n(42858),i=n(67294),r=n(25108);let l=0,o=!1;const s=(e,t)=>{const n=e?.getAttribute("data-theme")??"light",a="dark"===n?"dark":"default";return t?.theme?.[n]??t?.mermaid?.theme??a},d=e=>{let{chart:t,config:n}=e;const d=(0,i.useRef)(null),u=(0,i.useRef)("mermaid-"+l++),[c,p]=(0,i.useState)(""),m=(0,i.useMemo)((()=>"string"==typeof n?JSON.parse(n):n),[n]);return(0,i.useEffect)((()=>{if("undefined"==typeof window)return;const e=document.querySelector("html"),n=s(e,m);o||(a.Z.initialize({startOnLoad:!1,theme:n,...m?.mermaid||{}}),o=!0);(async()=>{try{const{svg:e}=await a.Z.render(u.current,t);p(e)}catch(e){r.error("Mermaid rendering failed:",e)}})()}),[t,m]),(0,i.useEffect)((()=>{if("undefined"==typeof window)return;const e=document.querySelector("html"),n=new MutationObserver((n=>{for(const i of n){if("attributes"!==i.type||"data-theme"!==i.attributeName)continue;const n=s(e,m);o=!1,a.Z.initialize({startOnLoad:!1,theme:n,...m?.mermaid||{}}),o=!0,u.current="mermaid-"+l++,a.Z.render(u.current,t).then((e=>{let{svg:t}=e;p(t)}));break}}));return n.observe(e,{attributes:!0}),()=>n.disconnect()}),[t,m]),"undefined"==typeof window?i.createElement("div",{className:"mermaid"},t):i.createElement("div",{ref:d,dangerouslySetInnerHTML:{__html:c}})}},55009:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>l,default:()=>c,frontMatter:()=>r,metadata:()=>o,toc:()=>s});var a=n(87462),i=(n(67294),n(3905));n(35722);const r={sidebar_position:4,title:"Relations",description:"Link entities together during synchronization"},l="Entity Relations",o={unversionedId:"integrations/erp-toolkit/inbound/relations",id:"integrations/erp-toolkit/inbound/relations",title:"Relations",description:"Link entities together during synchronization",source:"@site/docs/integrations/erp-toolkit/inbound/relations.md",sourceDirName:"integrations/erp-toolkit/inbound",slug:"/integrations/erp-toolkit/inbound/relations",permalink:"/docs/integrations/erp-toolkit/inbound/relations",editUrl:"https://github.com/epilot-dev/docs/edit/main/docs/integrations/erp-toolkit/inbound/relations.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4,title:"Relations",description:"Link entities together during synchronization"},sidebar:"docsSidebar",previous:{title:"Unique Identifiers",permalink:"/docs/integrations/erp-toolkit/inbound/unique-identifiers"},next:{title:"Meter Readings",permalink:"/docs/integrations/erp-toolkit/inbound/meter-readings"}},s=[{value:"Relation Basics",id:"relation-basics",children:[],level:2},{value:"Relation Configuration",id:"relation-configuration",children:[{value:"Required Properties",id:"required-properties",children:[],level:3},{value:"Optional Properties",id:"optional-properties",children:[],level:3}],level:2},{value:"Relation Operations",id:"relation-operations",children:[{value:"Set (<code>_set</code>)",id:"set-_set",children:[],level:3},{value:"Append (<code>_append</code>)",id:"append-_append",children:[],level:3},{value:"Append All (<code>_append_all</code>)",id:"append-all-_append_all",children:[],level:3}],level:2},{value:"Nested Identifier Access",id:"nested-identifier-access",children:[],level:2},{value:"Multiple Relations",id:"multiple-relations",children:[{value:"Array of Relations",id:"array-of-relations",children:[],level:3},{value:"Multiple Relation Types",id:"multiple-relation-types",children:[],level:3}],level:2},{value:"Conditional Relations",id:"conditional-relations",children:[],level:2},{value:"Advanced Relations Configuration",id:"advanced-relations-configuration",children:[{value:"Relations with Items",id:"relations-with-items",children:[],level:3},{value:"Dynamic Relations with JSONata",id:"dynamic-relations-with-jsonata",children:[],level:3},{value:"Relation References",id:"relation-references",children:[],level:3}],level:2},{value:"Relation Resolution Strategy",id:"relation-resolution-strategy",children:[{value:"Resolution Flow",id:"resolution-flow",children:[],level:3}],level:2},{value:"Creating Missing Related Entities",id:"creating-missing-related-entities",children:[],level:2},{value:"Relation Attribute Types",id:"relation-attribute-types",children:[],level:2},{value:"Error Handling",id:"error-handling",children:[{value:"Related Entity Not Found",id:"related-entity-not-found",children:[],level:3},{value:"Multiple Matches for Relation",id:"multiple-matches-for-relation",children:[],level:3}],level:2},{value:"Best Practices",id:"best-practices",children:[{value:"Order Your Entity Processing",id:"order-your-entity-processing",children:[],level:3},{value:"Use Conditional Relations",id:"use-conditional-relations",children:[],level:3},{value:"Validate Data Before Processing",id:"validate-data-before-processing",children:[],level:3}],level:2},{value:"Next Steps",id:"next-steps",children:[],level:2}],d={toc:s},u="wrapper";function c(e){let{components:t,...n}=e;return(0,i.kt)(u,(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"entity-relations"},"Entity Relations"),(0,i.kt)("p",null,"Relations connect entities in epilot. The ERP Toolkit creates and updates relations between entities during synchronization."),(0,i.kt)("h2",{id:"relation-basics"},"Relation Basics"),(0,i.kt)("p",null,"A relation links one entity to another. For example, linking a contract to its customer:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "entity_schema": "contract",\n  "unique_ids": ["contract_number"],\n  "fields": [\n    { "attribute": "contract_number", "field": "contractId" },\n    {\n      "attribute": "customer",\n      "relation": {\n        "entity_schema": "contact",\n        "unique_ids": ["customer_number"],\n        "source_field": "customerId"\n      }\n    }\n  ]\n}\n')),(0,i.kt)("h2",{id:"relation-configuration"},"Relation Configuration"),(0,i.kt)("h3",{id:"required-properties"},"Required Properties"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Property"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"entity_schema")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"The schema of the related entity")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"unique_ids")),(0,i.kt)("td",{parentName:"tr",align:null},"string[]"),(0,i.kt)("td",{parentName:"tr",align:null},"Fields to identify the related entity")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"source_field")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"Field in the payload containing the identifier value")))),(0,i.kt)("h3",{id:"optional-properties"},"Optional Properties"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Property"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Default"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"operation")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"_set")),(0,i.kt)("td",{parentName:"tr",align:null},"How to handle existing relations")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"enabled")),(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},"-"),(0,i.kt)("td",{parentName:"tr",align:null},"Condition to process this relation")))),(0,i.kt)("h2",{id:"relation-operations"},"Relation Operations"),(0,i.kt)("h3",{id:"set-_set"},"Set (",(0,i.kt)("inlineCode",{parentName:"h3"},"_set"),")"),(0,i.kt)("p",null,"Replaces all existing relations with the new one:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "attribute": "customer",\n  "relation": {\n    "entity_schema": "contact",\n    "unique_ids": ["customer_number"],\n    "source_field": "customerId",\n    "operation": "_set"\n  }\n}\n')),(0,i.kt)("h3",{id:"append-_append"},"Append (",(0,i.kt)("inlineCode",{parentName:"h3"},"_append"),")"),(0,i.kt)("p",null,"Adds new unique relations to existing ones with automatic deduplication:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "attribute": "related_contracts",\n  "relation": {\n    "entity_schema": "contract",\n    "unique_ids": ["contract_number"],\n    "source_field": "relatedContractId",\n    "operation": "_append"\n  }\n}\n')),(0,i.kt)("p",null,"If a relation with the same ",(0,i.kt)("inlineCode",{parentName:"p"},"entity_id")," already exists, it will not be added again."),(0,i.kt)("h3",{id:"append-all-_append_all"},"Append All (",(0,i.kt)("inlineCode",{parentName:"h3"},"_append_all"),")"),(0,i.kt)("p",null,"Adds all relations without deduplication (allows duplicates):"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "attribute": "audit_contacts",\n  "relation": {\n    "entity_schema": "contact",\n    "unique_ids": ["customer_number"],\n    "source_field": "auditContactId",\n    "operation": "_append_all"\n  }\n}\n')),(0,i.kt)("p",null,"Use ",(0,i.kt)("inlineCode",{parentName:"p"},"_append_all")," when you explicitly need to allow duplicate relations."),(0,i.kt)("h2",{id:"nested-identifier-access"},"Nested Identifier Access"),(0,i.kt)("p",null,"Access nested data for the relation identifier:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "attribute": "billing_account",\n  "relation": {\n    "entity_schema": "account",\n    "unique_ids": ["account_number"],\n    "source_field": "$.billing.accountId"\n  }\n}\n')),(0,i.kt)("h2",{id:"multiple-relations"},"Multiple Relations"),(0,i.kt)("h3",{id:"array-of-relations"},"Array of Relations"),(0,i.kt)("p",null,"Link to multiple entities from an array in the payload:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "attribute": "meters",\n  "relation": {\n    "entity_schema": "meter",\n    "unique_ids": ["meter_number"],\n    "source_field": "meterIds"\n  }\n}\n')),(0,i.kt)("p",null,"Given this input:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "meterIds": ["M001", "M002", "M003"]\n}\n')),(0,i.kt)("p",null,"Creates relations to all three meters."),(0,i.kt)("h3",{id:"multiple-relation-types"},"Multiple Relation Types"),(0,i.kt)("p",null,"Link to different entity types:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "entity_schema": "contract",\n  "unique_ids": ["contract_number"],\n  "fields": [\n    { "attribute": "contract_number", "field": "contractId" },\n    {\n      "attribute": "customer",\n      "relation": {\n        "entity_schema": "contact",\n        "unique_ids": ["customer_number"],\n        "source_field": "customerId"\n      }\n    },\n    {\n      "attribute": "billing_account",\n      "relation": {\n        "entity_schema": "account",\n        "unique_ids": ["account_number"],\n        "source_field": "billingAccountId"\n      }\n    },\n    {\n      "attribute": "meters",\n      "relation": {\n        "entity_schema": "meter",\n        "unique_ids": ["meter_number"],\n        "source_field": "meterIds"\n      }\n    }\n  ]\n}\n')),(0,i.kt)("h2",{id:"conditional-relations"},"Conditional Relations"),(0,i.kt)("p",null,"Process relations only when conditions are met:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "attribute": "partner",\n  "relation": {\n    "entity_schema": "contact",\n    "unique_ids": ["partner_number"],\n    "source_field": "partnerId",\n    "enabled": "$exists(partnerId) and partnerId != \'\'"\n  }\n}\n')),(0,i.kt)("h2",{id:"advanced-relations-configuration"},"Advanced Relations Configuration"),(0,i.kt)("h3",{id:"relations-with-items"},"Relations with Items"),(0,i.kt)("p",null,"For more control, use the ",(0,i.kt)("inlineCode",{parentName:"p"},"relations")," property with ",(0,i.kt)("inlineCode",{parentName:"p"},"items")," array:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "attribute": "billing_account",\n  "relations": {\n    "operation": "_set",\n    "items": [\n      {\n        "entity_schema": "billing_account",\n        "_tags": ["PRIMARY"],\n        "unique_ids": [\n          {\n            "attribute": "external_id",\n            "field": "accountId"\n          }\n        ]\n      }\n    ]\n  }\n}\n')),(0,i.kt)("p",null,"Each item in ",(0,i.kt)("inlineCode",{parentName:"p"},"unique_ids")," supports three value sources:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Source"),(0,i.kt)("th",{parentName:"tr",align:null},"Example"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"field")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},'{ "attribute": "external_id", "field": "accountId" }'))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"jsonataExpression")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},'{ "attribute": "full_name", "jsonataExpression": "firstName & \' \' & lastName" }'))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"constant")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},'{ "attribute": "source", "constant": "ERP" }'))))),(0,i.kt)("h3",{id:"dynamic-relations-with-jsonata"},"Dynamic Relations with JSONata"),(0,i.kt)("p",null,"Generate relation items dynamically from array data:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "attribute": "contacts",\n  "relations": {\n    "operation": "_set",\n    "jsonataExpression": "persons.{ \\"entity_schema\\": \\"contact\\", \\"unique_ids\\": [{ \\"attribute\\": \\"email\\", \\"constant\\": email }], \\"_tags\\": [role] }"\n  }\n}\n')),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Input:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "persons": [\n    { "email": "john@example.com", "role": "OWNER" },\n    { "email": "jane@example.com", "role": "USER" }\n  ]\n}\n')),(0,i.kt)("p",null,"This creates relations to both contacts with their respective role tags."),(0,i.kt)("h3",{id:"relation-references"},"Relation References"),(0,i.kt)("p",null,"Relation references (",(0,i.kt)("inlineCode",{parentName:"p"},"$relation_ref"),") link to a specific item within a repeatable attribute on a related entity, such as a specific address:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "attribute": "billing_address",\n  "relation_refs": {\n    "operation": "_set",\n    "items": [\n      {\n        "entity_schema": "contact",\n        "unique_ids": [\n          {\n            "attribute": "customer_number",\n            "field": "CustomerNumber"\n          }\n        ],\n        "path": "address",\n        "value": {\n          "attribute": "address",\n          "operation": "_append",\n          "jsonataExpression": "{ \\"street\\": BillingStreet, \\"city\\": BillingCity, \\"country\\": \'DE\', \\"postal_code\\": BillingPostalCode }"\n        }\n      }\n    ]\n  }\n}\n')),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Processing flow:")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Find or create the contact by ",(0,i.kt)("inlineCode",{parentName:"li"},"customer_number")),(0,i.kt)("li",{parentName:"ol"},"Append the address to the contact's address attribute"),(0,i.kt)("li",{parentName:"ol"},"Create a ",(0,i.kt)("inlineCode",{parentName:"li"},"$relation_ref")," linking to that specific address item")),(0,i.kt)("p",null,"The system automatically preserves ",(0,i.kt)("inlineCode",{parentName:"p"},"_id")," values when updating repeatable attributes to maintain stable references."),(0,i.kt)("h2",{id:"relation-resolution-strategy"},"Relation Resolution Strategy"),(0,i.kt)("p",null,"The ERP Toolkit uses an ",(0,i.kt)("strong",{parentName:"p"},"all-or-nothing")," strategy:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"All relations in a mapping resolve before any entity updates"),(0,i.kt)("li",{parentName:"ol"},"If any relation cannot be found, the entire update fails"),(0,i.kt)("li",{parentName:"ol"},"This ensures data consistency")),(0,i.kt)("h3",{id:"resolution-flow"},"Resolution Flow"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"Parse Relation Config\n        \u2502\n        \u25bc\nExtract Identifier Value\n        \u2502\n        \u25bc\nSearch for Related Entity\n        \u2502\n        \u251c\u2500\u2500\u2500 Found \u2500\u2500\u2500\u2500\u2500\u2500\u25b6 Store Entity ID\n        \u2502\n        \u2514\u2500\u2500\u2500 Not Found \u2500\u2500\u25b6 Fail Entire Update\n")),(0,i.kt)("h2",{id:"creating-missing-related-entities"},"Creating Missing Related Entities"),(0,i.kt)("p",null,"Use ",(0,i.kt)("inlineCode",{parentName:"p"},"post_actions")," to create related entities if they don't exist:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "entity_schema": "contract",\n  "unique_ids": ["contract_number"],\n  "fields": [\n    { "attribute": "contract_number", "field": "contractId" },\n    {\n      "attribute": "customer",\n      "relation": {\n        "entity_schema": "contact",\n        "unique_ids": ["customer_number"],\n        "source_field": "customerId"\n      }\n    }\n  ],\n  "post_actions": {\n    "create_missing_relations": true\n  }\n}\n')),(0,i.kt)("p",null,"With this configuration, if the related contact doesn't exist, it will be created with the identifier value."),(0,i.kt)("h2",{id:"relation-attribute-types"},"Relation Attribute Types"),(0,i.kt)("p",null,"Relations in epilot are stored with metadata. You can specify the relation type:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "attribute": "customer",\n  "relation": {\n    "entity_schema": "contact",\n    "unique_ids": ["customer_number"],\n    "source_field": "customerId",\n    "relation_type": "primary_contact"\n  }\n}\n')),(0,i.kt)("h2",{id:"error-handling"},"Error Handling"),(0,i.kt)("h3",{id:"related-entity-not-found"},"Related Entity Not Found"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "status": "error",\n  "message": "Related entity not found",\n  "error": {\n    "code": "RELATION_NOT_FOUND",\n    "details": {\n      "entity_schema": "contact",\n      "unique_ids": ["customer_number"],\n      "identifier_value": "C001"\n    }\n  }\n}\n')),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Resolution Options:")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Ensure the related entity exists before processing"),(0,i.kt)("li",{parentName:"ol"},"Enable ",(0,i.kt)("inlineCode",{parentName:"li"},"create_missing_relations")," in post_actions"),(0,i.kt)("li",{parentName:"ol"},"Make the relation conditional with ",(0,i.kt)("inlineCode",{parentName:"li"},"enabled"))),(0,i.kt)("h3",{id:"multiple-matches-for-relation"},"Multiple Matches for Relation"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "status": "error",\n  "message": "Multiple entities found for relation",\n  "error": {\n    "code": "AMBIGUOUS_RELATION"\n  }\n}\n')),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Resolution:")," Use more specific unique identifiers or clean up duplicate data."),(0,i.kt)("h2",{id:"best-practices"},"Best Practices"),(0,i.kt)("h3",{id:"order-your-entity-processing"},"Order Your Entity Processing"),(0,i.kt)("p",null,"Process parent entities before children:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "entities": [\n    {\n      "entity_schema": "contact",  // Process first\n      "unique_ids": ["customer_number"],\n      "fields": [...]\n    },\n    {\n      "entity_schema": "contract",  // Process second, can now reference contact\n      "unique_ids": ["contract_number"],\n      "fields": [\n        {\n          "attribute": "customer",\n          "relation": {\n            "entity_schema": "contact",\n            "unique_ids": ["customer_number"],\n            "source_field": "customerId"\n          }\n        }\n      ]\n    }\n  ]\n}\n')),(0,i.kt)("h3",{id:"use-conditional-relations"},"Use Conditional Relations"),(0,i.kt)("p",null,"Avoid failures from missing optional relations:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "attribute": "secondary_contact",\n  "relation": {\n    "entity_schema": "contact",\n    "unique_ids": ["customer_number"],\n    "source_field": "secondaryCustomerId",\n    "enabled": "$exists(secondaryCustomerId)"\n  }\n}\n')),(0,i.kt)("h3",{id:"validate-data-before-processing"},"Validate Data Before Processing"),(0,i.kt)("p",null,"Pre-validate relation data with JSONata:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "attribute": "customer",\n  "relation": {\n    "entity_schema": "contact",\n    "unique_ids": ["customer_number"],\n    "source_field": "customerId",\n    "enabled": "$type(customerId) = \'string\' and $length(customerId) > 0"\n  }\n}\n')),(0,i.kt)("h2",{id:"next-steps"},"Next Steps"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"./meter-readings"},"Meter Readings")," - Handle meter reading data"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"./examples"},"Examples")," - Complete integration examples")))}c.isMDXComponent=!0}}]);